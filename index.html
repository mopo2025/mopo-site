<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>MOPO Ski School｜MOPO 中文滑雪學校</title>
<meta name="description" content="MOPO 中文滑雪學校｜札幌手稻與札幌國際滑雪場等的專業滑雪課程。提供中文、日文、英文、廣東話教學，日本公司安全合法，專業教練團隊。">

<!-- ✅ SEO / Open Graph / Twitter Card -->
<link rel="canonical" href="https://moposki.com/">
  <!-- hreflang：三語互指 + x-default -->
  <link rel="alternate" href="https://moposki.com/" hreflang="zh-Hant">
  <link rel="alternate" href="https://moposki.com/ja_mopoindex.html" hreflang="ja">
  <link rel="alternate" href="https://moposki.com/en_mopoindex.html" hreflang="en">
  <link rel="alternate" href="https://moposki.com/" hreflang="x-default">
  
<meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1">

<meta property="og:title" content="MOPO Ski School｜MOPO 中文滑雪學校">
<meta property="og:description" content="日本北海道滑雪｜多國語言教練，量身打造的學習體驗。課程價格・最新消息・聯絡我們。">
<meta property="og:url" content="https://YOUR_CANONICAL_URL/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="MOPO Ski School">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://YOUR_OG_IMAGE_URL/og-image.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="MOPO Ski School｜MOPO 中文滑雪學校">
<meta name="twitter:description" content="日本北海道滑雪｜多國語言教練，量身打造的學習體驗。">
<meta name="twitter:image" content="https://YOUR_OG_IMAGE_URL/og-image.jpg">

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700;800&family=Noto+Sans+TC:wght@400;500;700&family=Noto+Serif+TC:wght@700;900&display=swap" rel="stylesheet">
<style>
/* ===== 全域字體設定（與日文版一致） ===== */
body {
  font-family:"Noto Sans JP","Montserrat",system-ui,Arial,sans-serif;
  line-height:1.6;
  color:#0E1A24;
}

:root{
  --bg-top:#E7E9EA;
  --bg-mid:#FFFFFF;
  --bg-bottom:#9B9793;

  --midnight:#0D1B2A;
  --gold:#C8A45D; --gold-2:#E4CFA3;
  --ink:#0E1A24; --ink-soft:#3E4A57;

  --shadow:0 18px 50px rgba(13,27,42,.10);
  --radius:16px; --focus:0 0 0 3px rgba(200,164,93,.22);

  --slide:0; --fade:0; --gray:0;
}
*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{margin:0; font:16px/1.7 "Montserrat","Helvetica Neue",Helvetica,Arial,"Noto Sans TC","Hiragino Sans","Microsoft JhengHei",sans-serif; color:var(--ink); background:var(--bg-top)}
a{color:inherit; text-decoration:none}
.container{max-width:1200px; margin:0 auto; padding:0 22px}
html, body { overflow-x: hidden; }
.hero, .news { position: relative; contain: layout paint; }

/* ===== Topbar ===== */
.topbar{
  position:fixed; left:0; right:0; top:0;
  z-index:2000;
  background:rgba(255,255,255,.24);
  backdrop-filter:saturate(1.28) blur(18px);
  border-bottom:1px solid rgba(200,164,93,.24);
  transition:all .25s ease
}
.topbar.scrolled{ background:rgba(255,255,255,.45) }
.topbar.hide { transform: translateY(-100%); transition: transform 0.3s ease; }

.nav{display:flex; align-items:center; justify-content:space-between; gap:14px; padding:12px 0}
.brand{display:flex; align-items:baseline; gap:10px; letter-spacing:.10em; padding-left:8px}
@media (max-width:760px){ .brand{padding-left:14px} }
.brand .logo{font-weight:800; font-size:18px}
.brand .sub{font-weight:700; color:var(--ink-soft); letter-spacing:.06em}

/* 桌面選單 */
.menu{display:flex; gap:8px; align-items:center; margin:0; padding:0}
.menu>li{list-style:none; position:relative}
.menu>li>a{display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px; font-weight:700; color:var(--midnight); position:relative}
.menu>li>a::after{content:""; position:absolute; left:12px; right:12px; bottom:6px; height:2px; background:linear-gradient(90deg,var(--gold),var(--gold-2)); transform:scaleX(0); transform-origin:left; transition:transform .22s ease}
.menu>li:hover>a::after{transform:scaleX(1)}
.topbar.scrolled .menu>li>a{color:#8C723E}

/* ▼ 桌機下拉選單 */
.has-dropdown{ position:relative; }
.has-dropdown > a{ cursor: default; }
.has-dropdown > a .caret{ font-size:.9em; margin-left:4px; }
.submenu{
  display:none; position:absolute; top:calc(100% + 2px); left:0; min-width:220px;
  background:#fff; border:1px solid #eee; border-radius:12px; box-shadow:var(--shadow); padding:6px 0; z-index:2100;
}
.has-dropdown:hover .submenu, .has-dropdown:focus-within .submenu{ display:block; }
.submenu li{ list-style:none; }
.submenu a{ display:block; padding:10px 14px; font-size:14px; color:#222; }
.submenu a:hover{ background:rgba(200,164,93,.1); }
.group-title{ padding:8px 14px 6px; font-weight:700; font-size:12px; color:#999; cursor:default; }
.has-dropdown::after{ content:""; position:absolute; left:0; right:0; top:100%; height:12px; }

/* 語言（桌機） */
.lang select{appearance:none; padding:9px 12px; border-radius:12px; border:1px solid #e6e6e6; background:#fff; font-size:14px; color:#2b3b4a}

/* 手機工具 */
.mobtools{display:none; align-items:center; gap:10px}
.iconbtn{width:38px; height:38px; border-radius:12px; border:1px solid #e6e6e6; background:#fff; display:inline-flex; align-items:center; justify-content:center; cursor:pointer}
.mobdrop{position:relative}
.mobpanel{position:absolute; left:0; top:calc(100% + 8px); min-width:280px; background:#fff; border:1px solid #eee; border-radius:14px; box-shadow:var(--shadow); padding:6px 0; opacity:0; transform:scale(.98); transform-origin:top left; pointer-events:none; transition:opacity .18s ease, transform .18s ease; z-index:610}
.mobpanel.show{opacity:1; transform:scale(1); pointer-events:auto}
.mobpanel a, .mobpanel button{display:block; width:100%; text-align:left; padding:12px 14px; background:#fff; border:0; cursor:pointer}
.mobLangBtn{padding:0 10px; height:38px; display:inline-flex; align-items:center; gap:6px; border:1px solid #e6e6e6; background:#fff; border-radius:12px; font-size:12px; font-weight:800; color:#333}

/* 手機小標 */
.mob-subtitle{
  padding:8px 14px 6px;
  font-size:12px;
  font-weight:800;
  color:#777;
  letter-spacing:.02em;
  cursor:default;
}

/* 手機遮罩 */
#mobOverlay{position:fixed; inset:0; background:rgba(0,0,0,.25); opacity:0; pointer-events:none; visibility:hidden; transition:opacity .18s ease; z-index:590}
#mobOverlay.show{opacity:1; pointer-events:auto; visibility:visible; backdrop-filter:blur(2px)}
@supports (-webkit-backdrop-filter: blur(0)){ #mobOverlay.show{ -webkit-backdrop-filter: blur(2px); } }
#mobOverlay[hidden]{display:none !important; visibility:hidden !important;}
#mobOverlay.noblur{backdrop-filter:none !important; -webkit-backdrop-filter:none !important}
#mobOverlay.noblur.show{background:rgba(0,0,0,.35)}

/* ===== Hero ===== */
.hero{position:relative; min-height:86vh; display:grid; align-items:center; overflow:hidden; background:var(--bg-mid)}
.hero__bg{position:absolute; inset:0; transition:filter .25s linear, opacity .25s linear}
.hero__bg .slide{position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; transition:opacity .8s ease}
.hero__bg .slide.active{opacity:1}
.hero__bg .slide:nth-child(1){background-image:url('hero.jpg')}
.hero__bg .slide:nth-child(2){background-image:url('panel1.jpg')}
.hero__bg .slide:nth-child(3){background-image:url('panel2.jpg')}
.hero .container{position:relative; z-index:2}
.hero__wrap{display:grid; grid-template-columns:1.2fr 1fr; gap:28px; align-items:center}
.hero .content{padding-top:10vh; transform:translateX(calc(-60vw * var(--slide))); opacity:calc(1 - var(--fade)); transition:transform .05s linear, opacity .05s linear}
.hero__bg{filter:grayscale(var(--gray)); opacity:calc(1 - 0.15 * var(--fade))}
h1{margin:0 0 4px 0}
.logoLine{display:inline-flex; align-items:flex-end; gap:10px; position:relative}
.logoLine .main{font-family:"Noto Serif TC","Hiragino Mincho ProN","Songti TC",serif; font-size:clamp(34px,6.2vw,64px); line-height:1.05; color:#111}
.logoLine .sub{font-size:.58em; font-weight:800; letter-spacing:.08em; color:#111}
.logoLine::after{content:""; position:absolute; left:0; right:0; bottom:-8px; height:2px; background:linear-gradient(90deg, var(--gold), var(--gold-2)); border-radius:999px}
.subtitle{margin:10px 0 16px; font-size:16px; color:#000}
.btn{position:relative; isolation:isolate; display:inline-block; padding:10px 14px; border-radius:999px; border:1px solid var(--gold); background:#fff; color:#midnight; font-weight:800; letter-spacing:.02em; overflow:hidden; transition:transform .18s ease, color .25s ease, border-color .25s ease}
.btn::before{content:""; position:absolute; inset:2px; border-radius:inherit; background:rgba(200,164,93,.0); transform:scale(.1); opacity:0; transition:transform .38s ease, opacity .38s ease, background .38s ease}
.btn:hover::before{ transform:scale(1); opacity:1; background:rgba(200,164,93,.22) }
.btn:active{transform:translateY(1px)}
.btn:focus-visible{outline:none; box-shadow:var(--focus)}
.hero-dots{position:absolute; left:50%; bottom:18px; transform:translateX(-50%); display:flex; gap:8px; z-index:3}
.hero-dots button{width:46px; height:6px; border-radius:999px; border:0; background:rgba(0,0,0,.25); cursor:pointer}
.hero-dots button.active{background:rgba(0,0,0,.65)}

/* ===== 最新消息 ===== */
.news{ --gap:12px; --size:140px; --visible:2; margin-top:16px; display:flex; justify-content:flex-start; }
.news-viewport{ overflow:hidden; width: calc(var(--size) * var(--visible) + var(--gap) * (var(--visible) - 1)); }
.news-row{ display:flex; gap:var(--gap); transform: translateX(calc(var(--newsShift, 1) * var(--slide) * 70vw)); transition: transform .05s linear; }
.news-card{ flex:0 0 auto; width:var(--size); height:var(--size); border-radius:16px; overflow:hidden; border:0px solid #e9e9e9; position:relative; }
.news-card img{ width:100%; height:100%; object-fit:cover; display:block; transform:scale(1); transition:transform .35s ease, filter .15s linear; filter: grayscale(var(--gray)); }
.news-card:hover img{ transform:scale(1.08) }
@media (max-width:760px){
  .news{ --size:100px; --visible:2; justify-content:flex-start; }
  .news-row{ --newsShift:-1; }
}

/* ===== 區塊 ===== */
.section{padding:84px 0}
#about-mopo.section{background:var(--bg-mid)}
#pricing.section{background:var(--bg-top)}
#contact.section{background:var(--bg-mid)}
.section__head h2{margin:0 0 8px; font-size:26px; letter-spacing:.02em; color:#111; font-family:"Noto Serif TC","Hiragino Sans","Songti TC",serif}
.muted{color:var(--ink-soft); font-size:14px}

/* reveal */
.reveal{opacity:0; transform:translateY(16px); transition:opacity .6s ease, transform .6s ease}
.reveal.in{opacity:1; transform:none}

.lines .line {
  display: inline-block;
  opacity: 0;
  transform: translateY(16px);
  animation: fadeUp 0.6s ease forwards;
}

.lines .line:nth-child(1) span { animation-delay: 0.2s; }
.lines .line:nth-child(2) span { animation-delay: 0.6s; }
.lines .line:nth-child(3) span { animation-delay: 1s; }
.lines .line:nth-child(4) span { animation-delay: 1.4s; }

@keyframes fadeUp {
  to { opacity: 1; transform: none; }
}


/* ===== 價格 ===== */
.pricelist{display:grid; grid-template-columns:1fr; gap:14px}
.pricecard{background:#fff; border:1px solid #eee; border-radius:14px; box-shadow:var(--shadow); overflow:hidden}
.pricecard summary{list-style:none; cursor:pointer; display:grid; grid-template-columns:1fr auto; align-items:center; gap:10px; padding:12px 14px}
.pricecard summary::-webkit-details-marker{display:none}
.pricecard .head{display:flex; flex-direction:column; gap:4px}
.pricecard .title{font-size:17px; font-weight:700}
.pricecard .desc{color:#516170; font-size:13px}
.fromrow{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
.fromtag{display:inline-flex; gap:6px; align-items:baseline; font-weight:600; font-size:14px; color:#222}
.fromtag small{font-weight:600; font-size:12px; color:#666}
.pricetable{display:grid; gap:10px; padding:0 14px 14px 14px; border-top:1px dashed #eee}
.season{border:1px dashed #e5e1da; border-radius:10px; padding:10px}
.season h4{margin:0 0 .25rem 0; font-size:14px}
.season small{display:block; color:#6f757c; font-size:12px}
.table{width:100%; border-collapse:separate; border-spacing:0 .35rem; margin-top:.3rem}
.table thead th{font-weight:600; font-size:12px; color:#6f757c; text-align:left}
.table td{padding:.35rem .25rem}
.table .people{width:7rem; font-weight:700; font-size:16px}
.table .price{font-weight:700; font-size:16px; color:#8B6B2E}
.table .pp{font-size:12px; color:#7a7f85; font-weight:600}
.note{margin-top:.4rem; font-size:12px; color:#6f757c}
.note-row{display:flex; align-items:center; justify-content:space-between; gap:12px}
.note-row .btns{flex:0 0 auto; display:flex; gap:8px}
.cta-row{display:none}
@media (max-width:760px){
  .hero__wrap{grid-template-columns:1fr}
  .section{padding:64px 0}
  .pricecard summary{grid-template-columns:1fr; gap:4px; padding:12px}
  .pricecard .title{font-size:16px}
  .pricecard .desc{font-size:12px}
  .fromrow{gap:8px}
  .fromrow .fromtag{font-size:13px}
  .pricetable{padding:8px 10px 12px 10px}
  .table thead{display:none}
  .table tbody{display:grid; gap:8px}
  .table tr{display:grid; grid-template-columns:1fr auto; align-items:center; gap:4px 8px; padding:8px 10px; background:#fff; border:1px solid #eee; border-radius:10px}
  .table td{padding:0}
  .table .people{font-size:15px}
  .table .price{font-size:15px; justify-self:end}
  .table .pp{grid-column:1/-1; justify-self:end; font-size:11px}
  .note-row{display:block}
  .note-row .btns{display:none}
  .cta-row{display:flex; gap:8px; margin:8px 0 0}
  .cta-row .btn{padding:8px 10px}
}

/* ===== 聯絡我們 ===== */
.contact-grid{display:grid; grid-template-columns:1fr 320px; gap:24px}
@media (max-width:900px){ .contact-grid{grid-template-columns:1fr} }
.form{display:grid; gap:12px; max-width:500px}
.form input, .form textarea{border:1px solid #e6e6e6; border-radius:12px; padding:10px 12px; font-size:16px; background:#fff}
.form textarea{min-height:110px}
.sns{display:grid; grid-template-columns:1fr 1fr; gap:10px; align-content:start; margin-top:6px}
.sns a{display:inline-flex; align-items:center; justify-content:center; padding:10px 12px; background:transparent; border:1px solid var(--gold); color:#111; font-weight:800; border-radius:12px; transition:background .25s ease, color .25s ease, border-color .25s ease}
.sns a:hover{background:rgba(200,164,93,.14); color:#111; border-color:#B88F45}

/* ===== Footer ===== */
.footer{background:var(--bg-bottom); color:var(--f7f7f7,#f7f7f7); border-top:1px solid rgba(255,255,255,.25)}
.sitemap{padding:34px 0}
.sitemap .cols{display:grid; grid-template-columns:repeat(4,1fr); gap:18px}
.sitemap h4{margin:0 0 8px; color:#fff; font-size:14px; font-family:"Noto Serif TC","Hiragino Sans","Songti TC",serif}
.sitemap ul{list-style:none; padding:0; margin:0; display:grid; gap:6px}
.sitemap a{color:#ebebeb; font-size:13px}
.sitemap a:hover{color:#fff}

/* FAB */
.fab{position:fixed; right:16px; bottom:16px; z-index:320}
.fab button{width:48px; height:48px; border-radius:50%; background:rgba(255,255,255,.86); border:1px solid rgba(0,0,0,.08); box-shadow:0 8px 20px rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.4); backdrop-filter:blur(6px); display:inline-flex; align-items:center; justify-content:center; cursor:pointer}

/* 手機：只顯示語言按鈕 */
@media (max-width:760px){
  .menu{display:none}
  .mobtools{display:flex}
  .lang{display:none}
  .mobdrop{ position: relative; }
  .mobpanel{
    left: auto;
    right: 0;
    width: min(92vw, 320px);
    max-width: 92vw;
    transform-origin: top right;
  }
  .mobpanel a, .mobpanel button{ white-space: nowrap; }
}
@media (max-width: 760px) {
  .form button[type="submit"] {
    max-width: 200px;
    width: auto;
    font-size: 16px;
    color: #111;
    background-color: var(--gold);
    padding: 10px 16px;
    border-radius: 12px;
    border: none;
    font-weight: bold;
    align-self: start;
  }
}




/* ===== MOPO：背景＋逐行出現＋縮高度＋按鈕（與日文版相同行為） ===== */
.about-hero{
  --aboutPad: clamp(120px, 28vh, 260px);
  position:relative;
  padding: var(--aboutPad) 0;
  background:transparent;
  overflow:hidden;
  transition: padding .9s ease-in-out;
  will-change: padding;
}
.about-hero__bg{ position:absolute; inset:0; overflow:hidden; }
.about-hero__bg picture,
.about-hero__bg img{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:cover; object-position:center;
  filter:saturate(1.04) contrast(1.02);
}
.about-hero::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.30));
  pointer-events:none;
}
.about-hero__content{
  position:relative; z-index:1; display:grid; place-items:center; gap:18px; text-align:center;
  transform: translateY(-8vh);
}
.visually-hidden{ position:absolute !important; clip:rect(1px,1px,1px,1px); width:1px; height:1px; overflow:hidden; white-space:nowrap; }
.lines{ display:grid; gap:10px; }

.line{
  opacity:0; transform:translateY(10px);
  transition:opacity 1.2s ease, transform 1.2s ease;
  font-family:"Noto Serif JP","Hiragino Mincho ProN","Yu Mincho",
               "Noto Serif TC","Hiragino Mincho ProN","Songti TC",serif;
  color:#111; text-shadow:0 1px 0 rgba(255,255,255,.35);
  letter-spacing:.15em;
  word-spacing:.12em;
  text-rendering:optimizeLegibility;
}
.line.big{
  font-size:clamp(38px, 6.4vw, 72px);
  font-weight:700;
}
.line.sub{
  font-size:clamp(16px, 2.1vw, 20px);
  color:#161616;
  font-weight:500;
}

.about-hero.active .lines .line{ opacity:1; transform:none; }
.about-hero .lines .line:nth-child(1){ transition-delay:0s; }
.about-hero .lines .line:nth-child(2){ transition-delay:.3s; }
.about-hero .lines .line:nth-child(3){ transition-delay:.6s; }
.about-hero .lines .line:nth-child(4){ transition-delay:.9s; }

.about-hero.compact{ --aboutPad: clamp(80px, 16vh, 180px); }

.hero.dim .hero__bg{ filter:grayscale(0.9) brightness(.96) blur(1px); transition:filter .35s ease; }
.hero.dim .content{ opacity:.35; transition:opacity .35s ease; }

.about-btn{
  margin-top:12px;
  display:inline-block;
  padding:10px 16px;
  border-radius:999px;
  border:1px solid rgba(200,164,93,.55);
  background:rgba(255,255,255,.28);
  backdrop-filter:blur(6px);
  -webkit-backdrop-filter:blur(6px);
  color:#111;
  font-weight:800; letter-spacing:.02em;
  transition:background .25s ease, border-color .25s ease, transform .15s ease;
}
.about-btn:hover{
  background:rgba(255,255,255,.45);
  border-color:var(--gold);
  transform:translateY(-1px);
}
.about-btn:focus-visible{ outline:none; box-shadow:var(--focus); }

@media (max-width:760px){
  .about-hero{ padding:120px 0; }
  .about-hero__content{ transform: translateY(-5vh); }
  .about-hero.compact{ --aboutPad: clamp(70px, 20vh, 150px); }
  .line.sub{ font-size:15px; }
  .about-btn{ padding:9px 14px; font-size:14px; }
}

/* === 價格表：桌機左右兩欄（與日文版一致） === */
@media (min-width: 761px){
  #pricing .pricetable{
    grid-template-columns: 1fr 1fr;
    gap: 14px 16px;
    align-items: start;
  }
  #pricing .pricetable .note-row,
  #pricing .pricetable .cta-row{
    grid-column: 1 / -1;
  }
  #pricing .pricetable .season{
    height: 100%;
  }
}

.note-row small { font-size:14px; color:#000000; display:block; margin-bottom:4px; }

.news-viewport { max-width: calc(2 * 140px + 1 * 12px); overflow: hidden; }



/* ===== 價格表：自訂字級與粗細 ===== */
.table .people {
  font-size: 18px;   /* 人數字體大小 */
  font-weight: 700;  /* 人數粗細 */
}

.table .price {
  font-size: 18px;   /* 價格字體大小 */
  font-weight: 800;  /* 價格粗細 */
  color: #8B6B2E;    /* 金色調，可自行修改 */
}

.table .pp {
  font-size: 13px;   /* 人均價格字體大小 */
  font-weight: 500;  /* 人均粗細 */
  color: #555;
}


/* ===== 價格表：繁忙期日期的通用版版型（所有雪場） ===== */

/* 桌機（≥761px）：兩欄，日期置頂跨兩欄 */
@media (min-width: 761px){
  .pricecard .pricetable{
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "dates dates"
      "standard busy";
    gap: 14px 16px;
    align-items: start;
  }
  .pricecard .busy-dates{ grid-area: dates; }
  .pricecard .season.standard{ grid-area: standard; }
  .pricecard .season.busy{ grid-area: busy; }

  /* 日期外觀（桌機）*/
  .pricecard .busy-dates{
    padding: 8px 10px;
    border: 1px dashed #d9d9d9;
    border-radius: 10px;
  }
  .pricecard .busy-dates small{ font-size: 14px; } /* ← 桌機字級 */
}

/* 手機（≤760px）：單欄順序＝標準 → 日期 → 繁忙期 */
@media (max-width: 760px){
  .pricecard .pricetable{
    display: grid;
    grid-template-columns: 1fr;
    grid-template-areas:
      "standard"
      "dates"
      "busy";
    gap: 10px;
  }
  .pricecard .busy-dates{ grid-area: dates; padding: 0 10px; border: 0; }
  .pricecard .season.standard{ grid-area: standard; }
  .pricecard .season.busy{ grid-area: busy; }

  .pricecard .busy-dates small{ font-size: 12px; } /* ← 手機字級 */
}




</style>
</head>
<body>
<header class="topbar" id="topbar">
  <div class="container nav">
    <div class="brand">
      <a href="#home" class="logo" aria-label="回到首頁">MOPO Ski School</a>
      
    </div>

    <ul class="menu" role="menubar" aria-label="網站導覽">
      <li role="none"><a role="menuitem" href="news.html">最新消息</a></li>
      <li role="none"><a role="menuitem" href="mopo.html">關於 MOPO</a></li>

      <!-- 滑雪課程：下拉 -->
      <li class="has-dropdown" role="none">
        <a role="menuitem" href="#" aria-haspopup="true" aria-expanded="false">滑雪課程 <span class="caret">▾</span></a>
        <ul class="submenu" role="menu" aria-label="滑雪課程子選單">
          <li role="none"><a role="menuitem" href="#pricing">課程與價格</a></li>
          <li class="group-title">雪場介紹</li>
          <li role="none"><a role="menuitem" href="teine.html">札幌手稻</a></li>
          <li role="none"><a role="menuitem" href="onze.html">小樽ONZE</a></li>
          <li role="none"><a role="menuitem" href="kokusai.html">札幌國際</a></li>
        </ul>
      </li>

      <!-- 主題文章：下拉 -->
      <li class="has-dropdown" role="none">
        <a role="menuitem" href="#" aria-haspopup="true" aria-expanded="false">主題文章 <span class="caret">▾</span></a>
        <ul class="submenu" role="menu" aria-label="主題文章子選單">
          <li role="none"><a role="menuitem" href="safe.html">安全知識</a></li>
          <li role="none"><a role="menuitem" href="trip.html">觀光主題</a></li>
        </ul>
      </li>

      <li role="none"><a role="menuitem" href="faq.html">常見問題</a></li>
      <li role="none"><a role="menuitem" href="booking.html">預約</a></li>
    </ul>

    <div class="lang">
      <select id="langSelect" aria-label="選擇語言">
        <option value="zh-Hant" selected>繁體中文</option>
        <option value="ja">日本語</option>
        <option value="en">English</option>
      </select>
    </div>

    <div class="mobtools" aria-label="行動工具">
      <div class="mobdrop" id="mobLangDrop">
        <button class="mobLangBtn" id="mobLangBtn" aria-label="語言">語言</button>
        <div class="mobpanel" id="mobLangPanel" role="menu" aria-label="語言選單">
          <a role="menuitem" data-lang="zh-Hant" href="#" aria-current="true">繁體中文</a>
          <a role="menuitem" data-lang="ja" href="#">日本語</a>
          <a role="menuitem" data-lang="en" href="#">English</a>
        </div>
      </div>

      <div class="mobdrop" id="mobNavDrop">
        <button class="iconbtn" aria-label="開啟導覽" id="mobNavBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h18" stroke="#333" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <div class="mobpanel" id="mobNavPanel" role="menu" aria-label="行動導覽">
          <a href="news.html" role="menuitem">最新消息</a>
          <a href="mopo.html" role="menuitem">關於 MOPO</a>

          <div class="mob-subtitle">滑雪課程</div>
          <a href="#pricing" role="menuitem">課程與價格</a>
          <div class="mob-subtitle">雪場介紹</div>
          <a href="teine.html" role="menuitem">札幌手稻</a>
          <a href="onze.html" role="menuitem">小樽ONZE</a>
          <a href="kokusai.html" role="menuitem">札幌國際</a>

          <div class="mob-subtitle">主題文章</div>
          <a href="safe.html" role="menuitem">安全知識</a>
          <a href="trip.html" role="menuitem">觀光主題</a>

          <a href="faq.html" role="menuitem">常見問題</a>
          <a href="booking.html" role="menuitem">預約</a>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- 行動版遮罩 -->
<div id="mobOverlay" aria-hidden="true" hidden></div>

<main>
  <!-- Hero -->
  <section class="hero" id="home" aria-label="英雄區">
    <div class="hero__bg" id="heroBg" aria-hidden="true">
      <div class="slide active"></div>
      <div class="slide"></div>
      <div class="slide"></div>
    </div>

    <div class="container hero__wrap">
      <div class="content">
        <h1 class="reveal" aria-label="MOPO Ski School">
          <span class="logoLine">
            <span class="main">MOPO</span>
            <span class="sub">ski school</span>
          </span>
        </h1>
        <p class="subtitle reveal">日本北海道滑雪｜多國語言教練，量身打造的學習體驗。</p>

        <div class="cta reveal" style="gap:12px">
          <a href="#pricing" class="btn" aria-label="課程與價格">課程與價格</a>
          <a href="booking.html" class="btn" aria-label="預約">預約</a>
        </div>

        <section class="news reveal" id="news" aria-label="最新消息">
          <div class="news-viewport">
            <div class="news-row" id="newsRow">
              <!-- ✅ lazy loading -->
              <a class="news-card" href="booking.html"><img src="news/news-1.png" alt="最新消息 1" loading="lazy" decoding="async"></a>
              <a class="news-card" href="teine.html"><img src="news/news-2.png" alt="最新消息 2" loading="lazy" decoding="async"></a>
              <a class="news-card" href="kokusai.html"><img src="news/news-3.png" alt="最新消息 3" loading="lazy" decoding="async"></a>
                    <a class="news-card" href="onze.html"><img src="news/news-4.png" alt="最新消息 4" loading="lazy" decoding="async"></a>
            </div>
          </div>
        </section>
      </div>
    </div>

    <div class="hero-dots" id="heroDots" aria-label="Hero 指示器">
      <button data-slide="0" class="active" aria-label="第 1 張"></button>
      <button data-slide="1" aria-label="第 2 張"></button>
      <button data-slide="2" aria-label="第 3 張"></button>
    </div>
  </section>

  <!-- 關於（背景圖＋逐行出現＋縮高度＋按鈕） -->
  <section id="about-mopo" class="section about-hero" aria-label="關於 MOPO">
    <div class="about-hero__bg" aria-hidden="true">
      <picture>
        <source
          type="image/webp"
          srcset="img/mopo-640.webp 640w, img/mopo-960.webp 960w, img/mopo-1280.webp 1280w, img/mopo-1920.webp 1920w"
          sizes="(max-width: 760px) 100vw, 1200px">
        <img
          src="img/mopo-1280.jpg"
          srcset="img/mopo-640.jpg 640w, img/mopo-960.jpg 960w, img/mopo-1280.jpg 1280w, img/mopo-1920.jpg 1920w"
          sizes="(max-width: 760px) 100vw, 1200px"
          alt="" width="1920" height="924"
          decoding="async" loading="eager" fetchpriority="high">
      </picture>
    </div>

    <div class="container about-hero__content">
      <h2 class="visually-hidden">關於 MOPO</h2>
      <div class="lines" aria-label="MOPO 的介紹">
        <div class="line big"><span>MOPO</span></div>
        <div class="line sub"><span>Formosa（美麗之島）與 Japow（粉雪）</span></div>
        <div class="line sub"><span>朝陽與夕照、粉雪、山脈</span></div>
        <div class="line sub"><span>映現並承載自然之美</span></div>
      </div>
      <a class="about-btn" href="mopo.html" aria-label="關於 MOPO">關於 MOPO</a>
    </div>
  </section>

  <!-- 價格（單一展開） -->
  <section id="pricing" class="section reveal" aria-label="課程與價格">
    <div class="container">
      <div class="section__head">
        <h2>課程與價格</h2>
        <p class="muted">全日 6 小時（含 1 小時休息）。<span class="mobbr"><br></span>金額為含稅價格。</p>
      </div>

      <div class="pricelist" id="courseList">
             
 <!-- 手稻 -->

<details class="pricecard" id="teine" open>
  <summary>
    <div class="head">
      <div class="title">手稻｜私人課（全日）</div>
      <div class="desc">雪質穩定，交通穩定。</div>
    </div>
    <div class="fromrow">
      <span class="fromtag"><small>標準時段</small> ¥ 72,000 起</span>
      <span class="fromtag"><small>繁忙期時段</small> ¥ 82,000 起</span>
    </div>
  </summary>
       <div class="pricetable">
  <!-- ★ 繁忙期日期（桌機置頂跨兩欄；手機排在繁忙期表格上方） -->
  <div class="busy-dates">
    <small>繁忙期：2025/12/20–01/11・2026/02/12–02/22・2026/02/27–03/01</small>
  </div>

  <!-- 標準 / 平日 -->
  <div class="season standard">
    <h4>標準價格</h4>
    <table class="table" aria-label="手稻・標準期間價目表">
      <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
      <tbody>
        <tr><td class="people">1 人</td><td class="price">¥ 72,000</td><td></td></tr>
        <tr><td class="people">2 人</td><td class="price">¥ 77,000</td><td class="pp">（每人 ¥ 38,500）</td></tr>
        <tr><td class="people">3 人</td><td class="price">¥ 82,000</td><td class="pp">（每人 ¥ 27,333）</td></tr>
        <tr><td class="people">4 人</td><td class="price">¥ 87,000</td><td class="pp">（每人 ¥ 21,750）</td></tr>
      </tbody>
    </table>
  </div>

  <!-- 繁忙期 -->
  <div class="season busy">
    <h4>繁忙期價格</h4>
    <table class="table" aria-label="手稻・繁忙期間價目表">
      <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
      <tbody>
        <tr><td class="people">1 人</td><td class="price">¥ 82,000</td><td></td></tr>
        <tr><td class="people">2 人</td><td class="price">¥ 87,000</td><td class="pp">（每人 ¥ 43,500）</td></tr>
        <tr><td class="people">3 人</td><td class="price">¥ 92,000</td><td class="pp">（每人 ¥ 30,666）</td></tr>
        <tr><td class="people">4 人</td><td class="price">¥ 97,000</td><td class="pp">（每人 ¥ 24,250）</td></tr>
      </tbody>
    </table>
  </div>

  <!-- 備註＋按鈕（移除重複的「繁忙期：…」那行） -->
  <div class="note-row">
    <div class="note">
       <p>＊小提醒：除繁忙期外，皆適用標準價格；繁忙期費用請依時間表為準</p>
        <p>＊第 5 位起每人 +¥5,000，最多 5 人。已含第三人責任保險。纜車票・器材・交通・午餐未包含。</p>
    </div>
    <div class="btns">
      <a class="btn" href="teine.html">雪場介紹</a>
      <a class="btn" href="booking.html">預約課程</a>
    </div>
  </div>

  <div class="cta-row">
    <a class="btn" href="teine.html">雪場介紹</a>
    <a class="btn" href="booking.html">預約課程</a>
  </div>
</div>
</details>

<!-- ONZE -->
<details class="pricecard" id="onze" open>
  <summary>
    <div class="head">
      <div class="title">ONZE｜私人課（全日）</div>
      <div class="desc">臨海絕景、交通便利，雪與海交織的非凡舞台。</div>
    </div>
    <div class="fromrow">
      <span class="fromtag"><small>標準時段</small> ¥ 72,000 起</span>
      <span class="fromtag"><small>繁忙期時段</small> ¥ 82,000 起</span>
    </div>
  </summary>

  <div class="pricetable">
    <!-- ★ 繁忙期日期：桌機置頂跨兩欄；手機會排到繁忙期表格上方 -->
    <div class="busy-dates">
      <small>繁忙期：2025/12/20～01/11・2026/02/12～02/22・2026/02/27～03/01</small>
    </div>

    <!-- 標準價格 -->
    <div class="season standard">
      <h4>標準價格</h4>
      <table class="table" aria-label="ONZE・標準期間價目表">
        <thead>
          <tr><th class="people">人數</th><th class="price">金額</th><th></th></tr>
        </thead>
        <tbody>
          <tr><td class="people">1 人</td><td class="price">¥ 72,000</td><td></td></tr>
          <tr><td class="people">2 人</td><td class="price">¥ 77,000</td><td class="pp">（每人 ¥ 38,500）</td></tr>
          <tr><td class="people">3 人</td><td class="price">¥ 82,000</td><td class="pp">（每人 ¥ 27,333）</td></tr>
          <tr><td class="people">4 人</td><td class="price">¥ 87,000</td><td class="pp">（每人 ¥ 21,750）</td></tr>
        </tbody>
      </table>
    </div>

    <!-- 繁忙期價格 -->
    <div class="season busy">
      <h4>繁忙期價格</h4>
      <table class="table" aria-label="ONZE・繁忙期間價目表">
        <thead>
          <tr><th class="people">人數</th><th class="price">金額</th><th></th></tr>
        </thead>
        <tbody>
          <tr><td class="people">1 人</td><td class="price">¥ 82,000</td><td></td></tr>
          <tr><td class="people">2 人</td><td class="price">¥ 87,000</td><td class="pp">（每人 ¥ 43,500）</td></tr>
          <tr><td class="people">3 人</td><td class="price">¥ 92,000</td><td class="pp">（每人 ¥ 30,666）</td></tr>
          <tr><td class="people">4 人</td><td class="price">¥ 97,000</td><td class="pp">（每人 ¥ 24,250）</td></tr>
        </tbody>
      </table>
    </div>

    <!-- 備註＋按鈕 -->
    <div class="note-row">
      <div class="note">
        <p>＊小提醒：除繁忙期間外，皆適用標準價格；繁忙期費用請依時間表為準</p>
        <p>＊第 5 位起每人 +¥5,000，最多 5 人。已含第三人責任保險。纜車票・器材・交通・午餐未包含。</p>
      </div>
      <div class="btns">
        <a class="btn" href="onze.html">雪場介紹</a>
        <a class="btn" href="booking.html">預約課程</a>
      </div>
    </div>

    <div class="cta-row">
      <a class="btn" href="onze.html">雪場介紹</a>
      <a class="btn" href="booking.html">預約課程</a>
    </div>
  </div>
</details>



<!-- 札幌國際 -->
<details class="pricecard" id="kokusai" open>
  <summary>
    <div class="head">
      <div class="title">札幌國際｜私人課（全日）</div>
      <div class="desc">視野開闊、多樣路線。</div>
    </div>
    <div class="fromrow">
      <span class="fromtag"><small>標準時段</small> ¥ 84,000 起</span>
      <span class="fromtag"><small>繁忙期時段</small> ¥ 94,000 起</span>
    </div>
  </summary>

  <div class="pricetable">
    <!-- ★ 繁忙期日期（桌機置頂跨兩欄；手機排在繁忙期表格上方） -->
    <div class="busy-dates">
      <small>繁忙期：2025/12/20～01/11・2026/02/12～02/22・2026/02/27～03/01</small>
    </div>

    <!-- 標準 -->
    <div class="season standard">
      <h4>標準價格</h4>
      <table class="table" aria-label="札幌國際・平日價目表">
        <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
        <tbody>
          <tr><td class="people">1 人</td><td class="price">¥ 84,000</td><td></td></tr>
          <tr><td class="people">2 人</td><td class="price">¥ 90,000</td><td class="pp">（每人 ¥ 45,000）</td></tr>
          <tr><td class="people">3 人</td><td class="price">¥ 96,000</td><td class="pp">（每人 ¥ 32,000）</td></tr>
          <tr><td class="people">4 人</td><td class="price">¥ 102,000</td><td class="pp">（每人 ¥ 25,500）</td></tr>
        </tbody>
      </table>
    </div>

    <!-- 繁忙期 -->
    <div class="season busy">
      <h4>繁忙期價格</h4>
      <table class="table" aria-label="札幌國際・繁忙期價目表">
        <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
        <tbody>
          <tr><td class="people">1 人</td><td class="price">¥ 94,000</td><td></td></tr>
          <tr><td class="people">2 人</td><td class="price">¥ 100,000</td><td class="pp">（每人 ¥ 50,000）</td></tr>
          <tr><td class="people">3 人</td><td class="price">¥ 106,000</td><td class="pp">（每人 ¥ 35,333）</td></tr>
          <tr><td class="people">4 人</td><td class="price">¥ 112,000</td><td class="pp">（每人 ¥ 28,000）</td></tr>
        </tbody>
      </table>
    </div>

    <!-- 備註＋按鈕（不重複「繁忙期：…」） -->
    <div class="note-row">
      <div class="note">
<p>＊小提醒：除繁忙時段外，皆適用標準價格；繁忙期費用請依時間表為準</p>
       <p>＊第 5 位起每人 +¥6,000，最多 5 人。已含第三人責任保險。纜車票・器材・交通・午餐未包含。</p>
      </div>
      <div class="btns">
        <a class="btn" href="kokusai.html">雪場介紹</a>
        <a class="btn" href="booking.html">預約課程</a>
      </div>
    </div>

    <div class="cta-row">
      <a class="btn" href="kokusai.html">雪場介紹</a>
      <a class="btn" href="booking.html">預約課程</a>
    </div>
  </div>
</details>



  <!-- 聯絡我們 -->
  <section id="contact" class="section reveal" aria-label="聯絡我們">
    <div class="container">
      <div class="section__head"><h2>聯絡我們</h2></div>
      <div class="contact-grid">
        <form id="contactForm" class="form" aria-label="聯絡表單">
          <input type="text" name="name" placeholder="姓名" required class="reveal" aria-label="姓名">
          <input type="email" name="email" placeholder="Email" required class="reveal" aria-label="Email">
          <input type="tel" name="phone" placeholder="電話（選填）" class="reveal" aria-label="電話（選填）">
          <textarea name="notes" placeholder="備註（課程需求／滑雪等級／預計日期等）" rows="5" class="reveal" aria-label="備註"></textarea>
          <button class="btn reveal" type="submit" style="justify-self:start">送出</button>
          <div id="contactMsg" style="font-size:18px; color:#0a7a3c"></div>
        </form>

        <aside aria-label="社群與聯絡方式" class="reveal" style="align-self:start">
          <h3 style="margin:0 0 8px 0;font-size:18px;color:#111">追蹤我們</h3>
          <div class="sns" style="display:flex; gap:10px; flex-wrap:wrap;">
              <a href="https://x.com/moposkischool?s=21&t=SMv0gAuFKA2NeZTjB2OMRw" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
              <img src="logo/x.png" alt="X" width="28" height="28" loading="lazy" decoding="async">
            </a>
          <a href="https://www.threads.com/@moposkischool" target="_blank" rel="noopener noreferrer" aria-label="Threads">
              <img src="logo/threads.png" alt="Threads" width="28" height="28" loading="lazy" decoding="async">
            </a>
              <a href="https://www.instagram.com/moposkischool?igsh=MWE4Zm5nbWZmN20yeA==" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
              <img src="logo/ig.png" alt="Instagram" width="28" height="28" loading="lazy" decoding="async">
            </a>
            <a href="https://www.facebook.com/profile.php?id=61579070109729" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
              <img src="logo/fb.png" alt="Facebook" width="28" height="28" loading="lazy" decoding="async">
            </a>
            <a href="https://line.me/ti/p/j95-Wq2Sfe" target="_blank" rel="noopener noreferrer" aria-label="LINE">
              <img src="logo/line.png" alt="LINE" width="28" height="28" loading="lazy" decoding="async">
            </a>
          </div>
        </aside>
      </div>
    </div>
  </section>
</main>

<footer class="footer" role="contentinfo">
  <section class="sitemap" aria-label="網站地圖">
    <div class="container">
      <div class="cols">
        <div>
          <h4>最新消息</h4>
          <ul>
            <li><a href="/news">News</a></li>
            <li><a href="#about-mopo">關於 MOPO</a></li>
          </ul>
        </div>
        <div>
          <h4>滑雪課程</h4>
          <ul>
            <li><a href="#pricing">課程與價格</a></li>
            <li><a href="#teine">札幌手稻</a></li>
            <li><a href="onze.html">小樽ONZE</a></li>
            <li><a href="#international">札幌國際</a></li>
          </ul>
        </div>
        <div>
          <h4>主題文章</h4>
          <ul>
            <li><a href="#pricing">安全知識</a></li>
            <li><a href="#pricing">觀光主題</a></li>
          </ul>
        </div>
        <div>
          <h4>資訊</h4>
          <ul>
            <li><a href="legal_tokusho.html">公司資訊</a></li>
            <li><a href="notice.html">報名須知</a></li>
            <li><a href="faq.html">常見問題</a></li>
            <li><a href="#contact">聯絡我們</a></li>
          </ul>
        </div>
      </div>
      <div style="display:flex; justify-content:space-between; align-items:center; padding-top:12px; border-top:1px solid rgba(255,255,255,.25); margin-top:18px">
        <div>© <span id="year"></span> MOPO Ski School</div>
      </div>
    </div>
  </section>
</footer>

<div class="fab">
  <button id="backTop" aria-label="回到頂部">
    <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5l7 7h-5v7H10v-7H5z" fill="#333"/></svg>
  </button>
</div>

<script>
// 顯示年份
document.getElementById('year').textContent = new Date().getFullYear();

// Topbar sticky/fixed 補償
(function(){
  const topbar = document.getElementById('topbar');
  function applySpacer(){
    if(!topbar) return;
    document.body.style.paddingTop = topbar.offsetHeight + 'px';
  }
  applySpacer();
  window.addEventListener('resize', applySpacer);
})();

// Topbar scrolled
const topbar = document.getElementById('topbar');
function setTopbar(){ topbar.classList.toggle('scrolled', window.scrollY > 10) }
setTopbar(); window.addEventListener('scroll', setTopbar, {passive:true});

/* 語言切換 */
(function(){
  const map = {
    'zh-Hant': 'index.html',
    'ja': 'ja_mopoindex.html',
    'en': 'en_mopoindex.html'
  };
  const sel = document.getElementById('langSelect');
  sel?.addEventListener('change', ()=>{
    const v = sel.value;
    const url = map[v] || 'index.html';
    window.location.href = url;
  });
  const mobPanel = document.getElementById('mobLangPanel');
  mobPanel?.addEventListener('click', (e)=>{
    const a = e.target.closest('[data-lang]');
    if(!a) return;
    e.preventDefault();
    const v = a.getAttribute('data-lang');
    const url = map[v] || 'index.html';
    window.location.href = url;
  });
})();

/* 手機語言 & 導覽 */
(function(){
  const overlay   = document.getElementById('mobOverlay');
  const langBtn   = document.getElementById('mobLangBtn');
  const langPanel = document.getElementById('mobLangPanel');
  const navBtn    = document.getElementById('mobNavBtn');
  const navPanel  = document.getElementById('mobNavPanel');

  const IOS16 = (() => {
    const ua = navigator.userAgent || "";
    const isIOS = /iP(ad|hone|od)/.test(ua);
    const m = ua.match(/OS (\d+)_/);
    const major = m ? parseInt(m[1], 10) : 0;
    return isIOS && major === 16;
  })();

  function closePanels(){
    langPanel?.classList.remove('show');
    navPanel?.classList.remove('show');
    overlay?.classList.remove('show');
    overlay?.classList.remove('noblur');
    if(overlay) overlay.hidden = true;
  }
  function openPanel(panel){
    if(panel !== langPanel) langPanel?.classList.remove('show');
    if(panel !== navPanel)  navPanel?.classList.remove('show');
    if(overlay){
      overlay.hidden = false;
      overlay.classList.add('show');
      if(IOS16) overlay.classList.add('noblur');
    }
    panel?.classList.add('show');
  }
  function togglePanel(panel){
    if(panel?.classList.contains('show')) closePanels();
    else openPanel(panel);
  }

  langBtn?.addEventListener('click', (e)=>{ e.stopPropagation(); togglePanel(langPanel); });
  navBtn?.addEventListener('click',  (e)=>{ e.stopPropagation(); togglePanel(navPanel);  });

  overlay?.addEventListener('click', closePanels);
  document.addEventListener('click', (e)=>{
    if(e.target.closest('.mobdrop')) return;
    closePanels();
  });
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePanels(); });

  navPanel?.addEventListener('click', (e)=>{
    const a = e.target.closest('a[href]');
    if(!a) return;
    e.preventDefault();
    const href = a.getAttribute('href') || '#';
    closePanels();
    setTimeout(()=>{
      if(href.startsWith('#')){
        const el = document.querySelector(href);
        if(el){ el.scrollIntoView({behavior:'smooth', block:'start'}); }
        else { window.location.href = href; }
      }else{
        window.location.href = href;
      }
    }, 0);
  });
})();

/* Hero 輪播 */
(function(){
  const slides = Array.from(document.querySelectorAll('.hero__bg .slide'));
  const dots = Array.from(document.querySelectorAll('#heroDots button'));
  let idx = 0, timer = null;
  function show(i){
    slides.forEach(s=>s.classList.remove('active'));
    dots.forEach(d=>d.classList.remove('active'));
    idx = (i+slides.length) % slides.length;
    slides[idx].classList.add('active');
    dots[idx].classList.add('active');
  }
  function play(){ timer = setInterval(()=> show(idx+1), 6000); }
  function stop(){ if(timer){ clearInterval(timer); timer=null; } }
  dots.forEach((d,i)=> d.addEventListener('click', ()=>{ stop(); show(i); play(); }));
  show(0); play();
})();

/* 最新消息：桌機 3、手機 2（支援任意張數，循環播放） */
(function(){
  const row = document.getElementById('newsRow');
  if(!row) return;

  const GAP = 12;
  const mq  = window.matchMedia('(max-width:760px)');
  const isMobile = ()=> mq.matches;

  const baseCards = ()=> Array.from(row.children).filter(n=>!n.classList.contains('clone'));
  const totalBase = ()=> baseCards().length;

  const visible = ()=> isMobile()? 2 : 3;
  const cardSize= ()=> isMobile()? 100 : 140;

  let index = 0, timer = null;

  function setup(){
    // 移除舊的 clone
    row.querySelectorAll('.clone').forEach(n=>n.remove());

    // 依目前可視數量補 clone
    const bases = baseCards();
    const need  = visible();
    for(let i=0;i<need;i++){
      const c = bases[i % bases.length].cloneNode(true);
      c.classList.add('clone');
      row.appendChild(c);
    }

    // 設定 viewport 寬度
    const vp = row.parentElement;
    vp.style.width = (cardSize()*visible() + GAP*(visible()-1)) + 'px';

    // 重置位置
    index = 0;
    row.style.transition = 'none';
    row.style.transform  = 'translateX(0px)';
  }

  function step(){
    index++;
    const stepPx = cardSize() + GAP;
    row.style.transition = 'transform .6s ease';
    row.style.transform  = `translateX(-${stepPx*index}px)`;

    // 當已完整滑過「原生卡片總數」時，用 clone 無縫歸零
    if(index >= totalBase()){
      setTimeout(()=>{
        row.style.transition = 'none';
        index = 0;
        row.style.transform = 'translateX(0px)';
      }, 620);
    }
  }

  function start(){
    if(timer) clearInterval(timer);
    timer = setInterval(step, 3000);
  }

  setup(); start();
  mq.addEventListener('change', ()=>{ setup(); start(); });
})();

/* reveal */
(function(){
  const els = document.querySelectorAll('.reveal');
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){ e.target.classList.add('in'); }
      else{ e.target.classList.remove('in'); }
    });
  }, {threshold:.15});
  els.forEach(el=> io.observe(el));
})();

/* 價格：單一展開 */
(function(){
  const list = document.getElementById('courseList');
  list?.addEventListener('toggle', (e)=>{
    const tgt = e.target;
    if(tgt.tagName.toLowerCase()!=='details' || !tgt.open) return;
    list.querySelectorAll('details[open]').forEach(d=>{ if(d!==tgt) d.open=false; });
  });
})();

/* 聯絡我們：mailto */
(function(){
  const form = document.getElementById('contactForm');
  const msg  = document.getElementById('contactMsg');
  if(!form) return;
  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const name = form.name.value.trim();
    const email= form.email.value.trim();
    const phone= form.phone.value.trim();
    const notes= form.notes.value.trim();
    const subject = encodeURIComponent(`[聯絡我們] ${name || '未填寫姓名'}`);
    const body =
      encodeURIComponent(`姓名：${name}\nEmail：${email}\n電話：${phone}\n\n備註／需求：\n${notes}\n`);
    const mailto = `mailto:support@moposki.com?subject=${subject}&body=${body}`;
    window.location.href = mailto;
    msg.textContent = '已開啟郵件撰寫視窗，請確認後送出。';
  });
})();

/* 捲動驅動（Hero/News） */
(function(){
  const hero = document.getElementById('home');
  if(!hero) return;

  const DIST_FACTOR = 1.10, GRAY_START = 0.60, EASE_POWER = 3.00;
  const clamp01 = x => Math.min(1, Math.max(0, x));
  const ease    = t => Math.pow(clamp01(t), EASE_POWER);

  function onScroll(){
    const rect = hero.getBoundingClientRect();
    const vh   = window.innerHeight || 1;

    const raw = clamp01(-rect.top / (vh * DIST_FACTOR));
    const slide = ease(raw);
    const fade  = ease(raw);

    const grayRaw = clamp01((raw - GRAY_START) / (1 - GRAY_START));
    const gray    = ease(grayRaw);

    document.documentElement.style.setProperty('--slide', slide.toFixed(4));
    document.documentElement.style.setProperty('--fade',  fade.toFixed(4));
    document.documentElement.style.setProperty('--gray',  gray.toFixed(4));
  }

  onScroll();
  window.addEventListener('scroll', onScroll, {passive:true});
  window.addEventListener('resize', onScroll);
})();

/* 回到頂部 */
document.getElementById('backTop').addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

/* Topbar：下滑隱藏 */
(function(){
  const topbar = document.getElementById('topbar');
  let lastScrollY = window.scrollY;
  let ticking = false;

  function update() {
    const currentY = window.scrollY;
    if (currentY > lastScrollY && currentY > 100) {
      topbar.classList.add('hide');
    } else {
      topbar.classList.remove('hide');
    }
    lastScrollY = currentY;
    ticking = false;
  }

  window.addEventListener('scroll', () => {
    if (!ticking) {
      window.requestAnimationFrame(update);
      ticking = true;
    }
  }, { passive: true });
})();

/* MOPO：逐行顯示與區塊縮放 */
(function(){
  const about = document.getElementById('about-mopo');
  const hero  = document.getElementById('home');
  if(!about || !hero) return;

  let compact = false;
  let activeShown = false;
  const hysteresis = 80;
  let enterY = 0;

  function compute() {
    const rect = about.getBoundingClientRect();
    const scrollY = window.scrollY || window.pageYOffset;
    const vh = window.innerHeight || 1;
    const aboutTop = scrollY + rect.top;
    enterY = aboutTop - vh * 0.85;
  }

   function apply() {
  const scrollY = window.scrollY || window.pageYOffset;

  // FIX: 檢查 Hero 是否大部分可見（保險條件，避免一直維持灰階）
  const heroRect = hero.getBoundingClientRect();
  const heroMostlyVisible =
    heroRect.top > -20 && heroRect.bottom - 120 > 0 && heroRect.height > 0 &&
    (heroRect.height - Math.abs(heroRect.top)) / heroRect.height >= 0.85;

  // 進入 About → Hero 變灰
  if (!activeShown && scrollY >= enterY) {
    about.classList.add('active');
    hero.classList.add('dim');
    activeShown = true;
  }

  // 離開 About 或 Hero 回到視窗 → 恢復彩色
  if (activeShown && (scrollY < enterY - hysteresis || heroMostlyVisible)) {
    about.classList.remove('active');
    hero.classList.remove('dim');
    activeShown = false;
  }

  // 保留原本的縮高度邏輯
  const aboutTopAbs = enterY + (window.innerHeight || 0) * 0.85;
  const shrinkOn  = aboutTopAbs + 140;
  const shrinkOff = aboutTopAbs + 60;

  if (!compact && scrollY > shrinkOn) {
    about.classList.add('compact');
    compact = true;
  } else if (compact && scrollY < shrinkOff) {
    about.classList.remove('compact');
    compact = false;
  }
}

  compute();
  apply();

  let ticking = false;
  window.addEventListener('scroll', ()=> {
    if (!ticking) {
      requestAnimationFrame(()=>{ apply(); ticking = false; });
      ticking = true;
    }
  }, { passive:true });

  window.addEventListener('resize', ()=> { compute(); apply(); }, { passive:true });
})();
</script>
</body>
</html>
