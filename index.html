<!doctype html>
<html lang="zh-Hant">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17610938726"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-17610938726');
  </script>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>MOPO 中文滑雪學校｜北海道札幌 手稻・札幌國際 ONZE 中文滑雪課程</title>
  <meta name="description" content="MOPO 中文滑雪學校。在北海道札幌的手稻,ONZE,札幌國際雪場提供專業滑雪課程；中文教練，支援日文／英文／廣東話。安全有保障，適合初學者與家庭。">

  <!-- SEO 基礎 -->
  <link rel="canonical" href="https://www.moposki.com/" />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1">

  <!-- Hreflang 語言標註 -->
  <link rel="alternate" href="https://www.moposki.com/" hreflang="zh-Hant" />
  <link rel="alternate" href="https://www.moposki.com/ja_mopoindex.html" hreflang="ja" />
  <link rel="alternate" href="https://www.moposki.com/en_mopoindex.html" hreflang="en" />
  <link rel="alternate" href="https://www.moposki.com/" hreflang="x-default" />

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="MOPO Ski School">
  <meta property="og:locale" content="zh_TW">
  <meta property="og:url" content="https://www.moposki.com/" />
  <meta property="og:title" content="MOPO 中文滑雪學校｜北海道札幌 中文滑雪課程">
  <meta property="og:description" content="在札幌手稻與札幌國際雪場提供專業滑雪課程。中文教練、合法營運、安全有保障。">
  <meta property="og:image" content="https://www.moposki.com/img/ind.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="MOPO 中文滑雪學校｜北海道札幌 專業滑雪課程">
  <meta name="twitter:description" content="中文教練、合法營運；札幌手稻・札幌國際滑雪課程。">
  <meta name="twitter:image" content="https://www.moposki.com/img/ind.jpg">

  <!-- 字型 -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700;800&family=Noto+Sans+TC:wght@400;500;700&family=Noto+Serif+TC:wght@700;900&display=swap" rel="stylesheet">
  
  <style>
    /* ===== 全域字體設定 ===== */
    body {
      font-family:"Noto Sans JP","Montserrat",system-ui,Arial,sans-serif;
      line-height:1.6;
      color:#0E1A24;
    }
    :root {
      --bg-top:#E7E9EA;
      --bg-mid:#FFFFFF;
      --bg-bottom:#9B9793;
      --midnight:#0D1B2A;
      --gold:#C8A45D;
      --gold-2:#E4CFA3;
      --ink:#0E1A24;
      --ink-soft:#3E4A57;
      --green-dark:#1A4D2E; /* 墨綠色 */
      --shadow:0 18px 50px rgba(13,27,42,.10);
      --radius:16px;
      --focus:0 0 0 3px rgba(200,164,93,.22);
      --slide:0;
      --fade:0;
      --gray:0;
    }
    * { box-sizing:border-box; }
    html { scroll-behavior:smooth; }
    body { margin:0; font:16px/1.7 "Montserrat","Helvetica Neue",Helvetica,Arial,"Noto Sans TC","Hiragino Sans","Microsoft JhengHei",sans-serif; color:var(--ink); background:var(--bg-top); }
    a { color:inherit; text-decoration:none; }
    .container { max-width:1200px; margin:0 auto; padding:0 22px; }
    html, body { overflow-x: hidden; }
    .hero, .news { position: relative; contain: layout paint; }

    /* ===== Topbar ===== */
    .topbar {
      position:fixed; left:0; right:0; top:0;
      z-index:2000;
      background:rgba(255,255,255,.24);
      backdrop-filter:saturate(1.28) blur(18px);
      border-bottom:1px solid rgba(200,164,93,.24);
      transition:all .25s ease;
    }
    .topbar.scrolled { background:rgba(255,255,255,.45); }
    .topbar.hide { transform: translateY(-100%); transition: transform 0.3s ease; }
    .nav { display:flex; align-items:center; justify-content:space-between; gap:14px; padding:12px 0; }
    .brand { display:flex; align-items:baseline; gap:10px; letter-spacing:.10em; padding-left:8px; }
    @media (max-width:760px) { .brand { padding-left:14px; } }
    .brand .logo { font-weight:800; font-size:18px; }
    .brand .sub { font-weight:700; color:var(--ink-soft); letter-spacing:.06em; }
    .menu { display:flex; gap:8px; align-items:center; margin:0; padding:0; }
    .menu>li { list-style:none; position:relative; }
    .menu>li>a { display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px; font-weight:700; color:var(--midnight); position:relative; }
    .menu>li>a::after { content:""; position:absolute; left:12px; right:12px; bottom:6px; height:2px; background:linear-gradient(90deg,var(--gold),var(--gold-2)); transform:scaleX(0); transform-origin:left; transition:transform .22s ease; }
    .menu>li:hover>a::after { transform:scaleX(1); }
    .topbar.scrolled .menu>li>a { color:#8C723E; }
    .has-dropdown { position:relative; }
    .has-dropdown > a { cursor: default; }
    .has-dropdown > a .caret { font-size:.9em; margin-left:4px; }
    .submenu {
      display:none; position:absolute; top:calc(100% + 2px); left:0; min-width:220px;
      background:#fff; border:1px solid #eee; border-radius:12px; box-shadow:var(--shadow); padding:6px 0; z-index:2100;
    }
    .has-dropdown:hover .submenu, .has-dropdown:focus-within .submenu { display:block; }
    .submenu li { list-style:none; }
    .submenu a { display:block; padding:10px 14px; font-size:14px; color:#222; }
    .submenu a:hover { background:rgba(200,164,93,.1); }
    .group-title { padding:8px 14px 6px; font-weight:700; font-size:12px; color:#999; cursor:default; }
    .has-dropdown::after { content:""; position:absolute; left:0; right:0; top:100%; height:12px; }
    .lang select { appearance:none; padding:9px 12px; border-radius:12px; border:1px solid #e6e6e6; background:#fff; font-size:14px; color:#2b3b4a; }
    .mobtools { display:none; align-items:center; gap:10px; }
    .iconbtn { width:38px; height:38px; border-radius:12px; border:1px solid #e6e6e6; background:#fff; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; }
    .mobdrop { position:relative; }
    .mobpanel { position:absolute; left:0; top:calc(100% + 8px); min-width:280px; background:#fff; border:1px solid #eee; border-radius:14px; box-shadow:var(--shadow); padding:6px 0; opacity:0; transform:scale(.98); transform-origin:top left; pointer-events:none; transition:opacity .18s ease, transform .18s ease; z-index:610; }
    .mobpanel.show { opacity:1; transform:scale(1); pointer-events:auto; }
    .mobpanel a, .mobpanel button { display:block; width:100%; text-align:left; padding:12px 14px; background:#fff; border:0; cursor:pointer; }
    .mobLangBtn { padding:0 10px; height:38px; display:inline-flex; align-items:center; gap:6px; border:1px solid #e6e6e6; background:#fff; border-radius:12px; font-size:12px; font-weight:800; color:#333; }
    .mob-subtitle { padding:8px 14px 6px; font-size:12px; font-weight:800; color:#777; letter-spacing:.02em; cursor:default; }
    #mobOverlay { position:fixed; inset:0; background:rgba(0,0,0,.25); opacity:0; pointer-events:none; visibility:hidden; transition:opacity .18s ease; z-index:590; }
    #mobOverlay.show { opacity:1; pointer-events:auto; visibility:visible; backdrop-filter:blur(2px); }
    @supports (-webkit-backdrop-filter: blur(0)) { #mobOverlay.show { -webkit-backdrop-filter: blur(2px); } }
    #mobOverlay[hidden] { display:none !important; visibility:hidden !important; }
    #mobOverlay.noblur { backdrop-filter:none !important; -webkit-backdrop-filter:none !important; }
    #mobOverlay.noblur.show { background:rgba(0,0,0,.35); }

    /* ===== Hero ===== */
    .hero { position:relative; min-height:86vh; display:grid; align-items:center; overflow:hidden; background:var(--bg-mid); }
    .hero__bg { position:absolute; inset:0; transition:filter .25s linear, opacity .25s linear; }
    .hero__bg .slide { position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; transition:opacity .8s ease; }
    .hero__bg .slide.active { opacity:1; }
    .hero__bg .slide:nth-child(1) { background-image:url('mopo.webp'); }
    .hero__bg .slide:nth-child(2) { background-image:url('panel1.jpg'); }
    .hero__bg .slide:nth-child(3) { background-image:url('panel2.jpg'); }
    .hero .container { position:relative; z-index:2; }
    .hero__wrap { display:grid; grid-template-columns:1.2fr 1fr; gap:28px; align-items:center; }
    .hero .content { padding-top:10vh; transform:translateX(calc(-60vw * var(--slide))); opacity:calc(1 - var(--fade)); transition:transform .05s linear, opacity .05s linear; }
    .hero__bg { filter:grayscale(var(--gray)); opacity:calc(1 - 0.15 * var(--fade)); }
    h1 { margin:0 0 4px 0; }
    .logoLine { display:inline-flex; align-items:flex-end; gap:10px; position:relative; }
    .logoLine .main { font-family:"Noto Serif TC","Hiragino Mincho ProN","Songti TC",serif; font-size:clamp(34px,6.2vw,64px); line-height:1.05; color:#111; }
    .logoLine .sub { font-size:.58em; font-weight:800; letter-spacing:.08em; color:#111; }
    .logoLine::after { content:""; position:absolute; left:0; right:0; bottom:-8px; height:2px; background:linear-gradient(90deg, var(--gold),var(--gold-2)); border-radius:999px; }
    .subtitle { margin:10px 0 16px; font-size:16px; color:#000; }
    .txt-hide-mob { display: inline; }
    @media (max-width: 760px) { .txt-hide-mob { display: none; } }

    .btn { position:relative; isolation:isolate; display:inline-block; padding:10px 14px; border-radius:999px; border:1px solid var(--gold); background:#fff; color:#midnight; font-weight:800; letter-spacing:.02em; overflow:hidden; transition:transform .18s ease, color .25s ease, border-color .25s ease; }
    .btn::before { content:""; position:absolute; inset:2px; border-radius:inherit; background:rgba(200,164,93,.0); transform:scale(.1); opacity:0; transition:transform .38s ease, opacity .38s ease, background .38s ease; }
    .btn:hover::before { transform:scale(1); opacity:1; background:rgba(200,164,93,.22); }
    .btn:active { transform:translateY(1px); }
    .btn:focus-visible { outline:none; box-shadow:var(--focus); }
    .hero-dots { position:absolute; left:50%; bottom:18px; transform:translateX(-50%); display:flex; gap:8px; z-index:3; }
    .hero-dots button { width:46px; height:6px; border-radius:999px; border:0; background:rgba(0,0,0,.25); cursor:pointer; }
    .hero-dots button.active { background:rgba(0,0,0,.65); }

    /* ===== 最新消息 (News) - 與日文版一致 ===== */
    .news { --gap:12px; --size:140px; --visible:3; margin-top:16px; display:flex; justify-content:flex-start; }
    
    .news-viewport { 
        overflow-x: auto; 
        overflow-y: hidden;
        width: calc(var(--size) * var(--visible) + var(--gap) * (var(--visible) - 1));
        max-width: 100%;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        cursor: grab;
        user-select: none;
        -webkit-user-select: none;
    }
    
    .news-viewport::-webkit-scrollbar { display: none; }
    
    .news-viewport.active {
        cursor: grabbing;
        scroll-snap-type: none; 
        scroll-behavior: auto; 
    }
    
    .news-row { 
        display: flex; 
        gap: var(--gap); 
        padding-bottom: 4px;
        width: max-content;
    }
    
    .news-card { 
        flex: 0 0 auto; 
        width: var(--size); 
        height: var(--size); 
        border-radius: 16px; 
        overflow: hidden; 
        position: relative;
        scroll-snap-align: start; 
    }
    
    .news-card img { 
        width: 100%; 
        height: 100%; 
        object-fit: cover; 
        display: block; 
        transform: scale(1); 
        transition: transform .35s ease, filter .15s linear; 
        filter: grayscale(var(--gray)); 
        pointer-events: none;
    }
    
    .news-card:hover img { transform:scale(1.08); }
    
    @media (max-width:760px) {
      .news { --size:100px; --visible:2; justify-content:flex-start; }
    }

    /* ===== 區塊 ===== */
    .section { padding:84px 0; }
    #about-mopo.section { background:var(--bg-mid); }
    #pricing.section { background:var(--bg-top); }
    #contact.section { background:var(--bg-mid); }
    .section__head h2 { margin:0 0 8px; font-size:26px; letter-spacing:.02em; color:#111; font-family:"Noto Serif TC","Hiragino Sans","Songti TC",serif; }
    .muted { color:var(--ink-soft); font-size:14px; }
    @media (max-width:760px) { .section { padding:40px 0; } }

    /* reveal */
    .reveal { opacity:0; transform:translateY(16px); transition:opacity .6s ease, transform .6s ease; }
    .reveal.in { opacity:1; transform:none; }
    #contact .reveal { opacity:1 !important; transform:none !important; transition:none !important; }

    .lines .line {
      display: inline-block;
      opacity: 0;
      transform: translateY(16px);
      animation: fadeUp 0.6s ease forwards;
    }
    .lines .line:nth-child(1) span { animation-delay: 0.2s; }
    .lines .line:nth-child(2) span { animation-delay: 0.6s; }
    .lines .line:nth-child(3) span { animation-delay: 1s; }
    .lines .line:nth-child(4) span { animation-delay: 1.4s; }
    @keyframes fadeUp {
      to { opacity: 1; transform: none; }
    }

    /* ===== 價格 (設計師級排版 - Grid 優化) ===== */
    .pricelist { display:grid; grid-template-columns:1fr; gap:14px; }
    .pricecard { background:#fff; border:1px solid #eee; border-radius:14px; box-shadow:var(--shadow); overflow:hidden; }
    
    .pricecard summary { 
      list-style:none; cursor:pointer; 
      display:flex; flex-direction: column; gap:12px; 
      padding:24px; position:relative; 
    }
    .pricecard summary::-webkit-details-marker { display:none; }
    
    .pricecard .head { display:flex; flex-direction:column; gap:6px; z-index: 2; position:relative; }
    .pricecard .title { font-size:20px; font-weight:800; color: var(--ink); letter-spacing: 0.02em; }
    .pricecard .desc { color:#516170; font-size:14px; line-height:1.6; }
    
    .mobile-desc { display: none; }
    .mobile-thumb { 
        display: none; 
        width: 100%; 
        height: 160px; 
        object-fit: cover; 
        border-radius: 12px; 
        margin-bottom: 16px;
        order: -1;
    }
    
    .fromrow { 
        display:grid; 
        grid-template-columns: 1fr auto 1fr; 
        align-items: center; 
        gap: 16px;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid #f2f2f2;
    }
    
    .price-tag-group {
        display: flex;
        flex-direction: column;
        justify-content: center;
        line-height: 1;
    }
    .price-tag-group.left { align-items: flex-start; }
    .price-tag-group.right { align-items: flex-end; }
    
    .pt-label {
        font-size: 11px;
        font-weight: 700;
        color: #999;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        margin-bottom: 4px;
    }
    .pt-price {
        font-family: "Montserrat", sans-serif;
        font-weight: 800;
        font-size: 20px;
        color: #8B6B2E;
        letter-spacing: -0.02em;
    }
    .pt-price small { 
        font-size: 11px; 
        font-weight: 700; 
        margin-left: 3px; 
        color: #b09560;
        text-transform: uppercase;
    }
    
    .price-divider {
        width: 1px;
        height: 28px;
        background-color: #e6e6e6;
    }
    
    .expand-hint {
        width: 100%;
        text-align: center;
        background-color: transparent;
        color: #bfa15f; 
        padding: 8px 0 0 0;
        font-weight: 600;
        font-size: 13px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        margin-top: 8px;
        cursor: pointer;
        transition: color 0.2s;
    }
    .expand-hint:hover { color: #8B6B2E; }
    
    .summary-btns {
        display:flex; gap:10px; margin-top: 8px; z-index: 5; position: relative; width: 100%;
    }
    .summary-btns .btn-sm {
        padding: 12px 20px; 
        font-size: 15px;     
        border-radius: 99px;
        background: #fff;
        border: 1px solid var(--gold); 
        color: var(--midnight);
        font-weight: 700;
        flex: 1; 
        text-align: center;
        transition: all 0.2s;
    }
    .summary-btns .btn-sm:hover { background: var(--gold); color: #fff; border-color: var(--gold); }

    .pricecard[open] .summary-btns { display: none; }
    .pricecard[open] .expand-hint { display: none; }
    .pricecard[open] .mobile-thumb { display: none; }
    .pricecard[open] .desc { display: block; }

    .pricetable { 
      padding: 0 14px 14px 14px; 
      border-top: 1px dashed #eee; 
      display: grid;
      gap: 16px;
    }
    
    /* 雙欄佈局 (桌機) */
    @media (min-width: 761px){
      #pricing .pricetable {
        grid-template-columns: 1fr 1fr;
        gap: 14px 16px;
        align-items: start;
      }
      #pricing .pricetable .note-row,
      #pricing .pricetable .cta-row {
        grid-column: 1 / -1;
      }
      #pricing .pricetable .season {
        height: 100%;
      }
    }

    .local-tabs {
      grid-column: 1 / -1;
      display: flex;
      justify-content: flex-start;
      gap: 8px;
      margin-top: 8px;
      margin-bottom: 4px;
      flex-wrap: wrap;
    }
    .tab-btn {
      padding: 8px 14px;
      border: 1px solid #ddd;
      background: #f9f9f9;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 700;
      color: #555;
      transition: all 0.2s ease;
      flex: 1;
      text-align: center;
      min-width: fit-content;
    }
    .tab-btn:hover { background: #eee; }
    .tab-btn.active {
      background: var(--midnight);
      color: #fff;
      border-color: var(--midnight);
    }

    .course-type-block {
      grid-column: 1 / -1;
      margin-top: 8px;
    }
    .course-type-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--green-dark);
      background-color: rgba(26, 77, 46, 0.08);
      padding: 6px 10px;
      border-radius: 6px;
      display: inline-block;
      margin-bottom: 8px;
    }
    
    .season { 
      display: none; 
      border:1px dashed #e5e1da; border-radius:10px; padding:10px; 
      animation: fadeIn 0.3s ease;
    }
    .season.active { display: block; }
    .season h4 { margin:0 0 .25rem 0; font-size:14px; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: none; }
    }

    .table { width:100%; border-collapse:separate; border-spacing:0 .35rem; margin-top:.3rem; }
    .table thead th { font-weight:600; font-size:12px; color:#6f757c; text-align:left; }
    .table td { padding:.35rem .25rem; }
    .table .people { width:7rem; font-weight:700; font-size:16px; }
    .table .price { font-weight:700; font-size:16px; color:#8B6B2E; }
    .table .pp { font-size:12px; color:#7a7f85; font-weight:600; }
    
    .note { margin-top:.4rem; font-size:12px; color:#6f757c; }
    .note-row { 
      display:flex; align-items:center; justify-content:space-between; gap:12px; 
      grid-column: 1 / -1;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid #eee;
    }
    .note-row small { font-size: 14px; color: #000000; display: block; margin-bottom: 4px; }
    .note-row .btns { flex:0 0 auto; display:flex; gap:8px; }
    .cta-row { display:none; }
    
    .busy-dates {
      grid-column: 1 / -1;
      font-size: 13px;
      color: #666;
      background: #fdfdfd;
      border: 1px solid #eee;
      border-radius: 8px;
      padding: 8px 10px;
      margin-bottom: 8px;
    }

    @media (max-width:760px) {
      .hero__wrap { grid-template-columns:1fr; }
      .mobile-thumb { display: block; } 
      .desktop-desc { display: none; }
      .mobile-desc { display: inline; }
      .pricetable { padding:8px 10px 12px 10px; display: flex; flex-direction: column; }
      .table thead { display:none; }
      .table tbody { display:grid; gap:8px; }
      .table tr { display:grid; grid-template-columns:1fr auto; align-items:center; gap:4px 8px; padding:8px 10px; background:#fff; border:1px solid #eee; border-radius:10px; }
      .table td { padding:0; }
      .table .people { font-size:15px; }
      .table .price { font-size:15px; justify-self:end; }
      .table .pp { grid-column:1/-1; justify-self:end; font-size:11px; }
      .note-row { display:block; }
      .note-row .btns { display:none; }
      .cta-row { display:flex; gap:8px; margin:8px 0 0; }
      .cta-row .btn { padding:8px 10px; flex: 1; text-align: center; }
      .local-tabs { gap: 6px; }
    }

    /* ===== 聯絡我們 ===== */
    .contact-grid { display:grid; grid-template-columns:1fr 320px; gap:24px; }
    @media (max-width:900px) { .contact-grid { grid-template-columns:1fr; } }
    .form { display:grid; gap:12px; max-width:500px; }
    .form input, .form textarea { border:1px solid #e6e6e6; border-radius:12px; padding:10px 12px; font-size:16px; background:#fff; }
    .form textarea { min-height:110px; }
    
    /* 社交圖示優化 (設計師質感) */
    .sns { display:flex; gap:16px; align-content:start; margin-top:8px; flex-wrap:wrap; }
    .sns a { 
        display:inline-flex; 
        align-items:center; 
        justify-content:center; 
        width: 64px; 
        height: 64px; 
        background:#fff; 
        border:1px solid #e0e0e0; 
        border-radius:50%; /* 圓形質感更好 */
        transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .sns a:hover { 
        transform: translateY(-3px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        border-color: var(--gold);
    }
    .sns img { width: 32px; height: 32px; display: block; }
    
    /* 手機版保持原樣 (44px) */
    @media (max-width: 760px) {
      .sns { gap: 12px; }
      .sns a { width: 44px; height: 44px; box-shadow: 0 2px 5px rgba(0,0,0,0.03); }
      .sns img { width: 22px; height: 22px; }
    }

    /* ===== Footer ===== */
    .footer { background:var(--bg-bottom); color:var(--f7f7f7,#f7f7f7); border-top:1px solid rgba(255,255,255,.25); }
    .sitemap { padding:34px 0; }
    .sitemap .cols { display:grid; grid-template-columns:repeat(4,1fr); gap:18px; }
    .sitemap h4 { margin:0 0 8px; color:#fff; font-size:14px; font-family:"Noto Serif TC","Hiragino Sans","Songti TC",serif; }
    .sitemap ul { list-style:none; padding:0; margin:0; display:grid; gap:6px; }
    .sitemap a { color:#ebebeb; font-size:13px; }
    .sitemap a:hover { color:#fff; }

    /* FAB */
    .fab { position:fixed; right:16px; bottom:16px; z-index:320; }
    .fab button { width:48px; height:48px; border-radius:50%; background:rgba(255,255,255,.86); border:1px solid rgba(0,0,0,.08); box-shadow:0 8px 20px rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.4); backdrop-filter:blur(6px); display:inline-flex; align-items:center; justify-content:center; cursor:pointer; }

    /* 手機：只顯示語言按鈕 */
    @media (max-width:760px) {
      .menu { display:none; }
      .mobtools { display:flex; }
      .lang { display:none; }
      .mobdrop { position: relative; }
      .mobpanel { left: auto; right: 0; width: min(92vw, 320px); max-width: 92vw; transform-origin: top right; }
      .mobpanel a, .mobpanel button { white-space: nowrap; }
    }
    @media (max-width: 760px) {
      .form button[type="submit"] { max-width: 200px; width: auto; font-size: 16px; color: #111; background-color: var(--gold); padding: 10px 16px; border-radius: 12px; border: none; font-weight: bold; align-self: start; }
    }

    /* ===== MOPO：背景＋逐行出現＋縮高度＋按鈕 ===== */
    .about-hero { --aboutPad: clamp(120px, 28vh, 260px); position:relative; padding: var(--aboutPad) 0; background:transparent; overflow:hidden; transition: padding .9s ease-in-out; will-change: padding; }
    .about-hero__bg { position:absolute; inset:0; overflow:hidden; }
    .about-hero__bg picture, .about-hero__bg img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center; filter:saturate(1.04) contrast(1.02); }
    .about-hero::after { content:""; position:absolute; inset:0; background:linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.30)); pointer-events:none; }
    .about-hero__content { position:relative; z-index:1; display:grid; place-items:center; gap:18px; text-align:center; transform: translateY(-8vh); }
    .visually-hidden { position:absolute !important; clip:rect(1px,1px,1px,1px); width:1px; height:1px; overflow:hidden; white-space:nowrap; }
    .lines { display:grid; gap:10px; }
    .line { opacity:0; transform:translateY(10px); transition:opacity 1.2s ease, transform 1.2s ease; font-family:"Noto Serif JP","Hiragino Mincho ProN","Yu Mincho","Noto Serif TC","Hiragino Mincho ProN","Songti TC",serif; color:#111; text-shadow:0 1px 0 rgba(255,255,255,.35); letter-spacing:.15em; word-spacing:.12em; text-rendering:optimizeLegibility; }
    .line.big { font-size:clamp(38px, 6.4vw, 72px); font-weight:700; }
    .line.sub { font-size:clamp(16px, 2.1vw, 20px); color:#161616; font-weight:500; }
    .about-hero.active .lines .line { opacity:1; transform:none; }
    .about-hero .lines .line:nth-child(1) { transition-delay:0s; }
    .about-hero .lines .line:nth-child(2) { transition-delay:.3s; }
    .about-hero .lines .line:nth-child(3) { transition-delay:.6s; }
    .about-hero .lines .line:nth-child(4) { transition-delay:.9s; }
    .about-hero.compact { --aboutPad: clamp(80px, 16vh, 180px); }

    /* 修改處：移除了 grayscale(0.9) 黑白濾鏡，僅保留亮度與模糊效果 */
    .hero.dim .hero__bg { filter:brightness(.96) blur(1px); transition:filter .35s ease; }
      
    .hero.dim .content { opacity:.35; transition:opacity .35s ease; }
    .about-btn { margin-top:12px; display:inline-block; padding:10px 16px; border-radius:999px; border:1px solid rgba(200,164,93,.55); background:rgba(255,255,255,.28); backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px); color:#111; font-weight:800; letter-spacing:.02em; transition:background .25s ease, border-color .25s ease, transform .15s ease; }
    .about-btn:hover { background:rgba(255,255,255,.45); border-color:var(--gold); transform:translateY(-1px); }
    .about-btn:focus-visible { outline:none; box-shadow:var(--focus); }
    @media (max-width:760px) {
      .about-hero { padding:120px 0; }
      .about-hero__content { transform: translateY(-5vh); }
      .about-hero.compact { --aboutPad: clamp(70px, 20vh, 150px); }
      .line.sub { font-size:15px; }
      .about-btn { padding:9px 14px; font-size:14px; }
    }

    /* ===== 為什麼選擇 MOPO (圖示置中 + 可愛風 + 修復版面) ===== */
    #why-mopo { background:var(--bg-mid); }
    #why-mopo .section__head { text-align: center; max-width: 800px; margin: 0 auto 32px; }
    #why-mopo .section__head h2 { font-size: 22px; }

    .why-grid { display:grid; grid-template-columns:1fr 1fr; gap:24px; margin-top:10px; }
    
    /* 可愛雪花圖標樣式 */
    .snow-icon {
      width: 32px; /* 稍微放大一點點 */
      height: 32px;
      color: var(--gold);
      display: block; 
      margin: 0 auto 12px auto; /* 確保置中 */
    }
    
    /* 統一卡片樣式設定 */
    .why-item {
      background: #fff;
      border: 1px solid #e0e0e0;
      border-left: 4px solid var(--green-dark);
      border-radius: 12px;
      padding: 28px 24px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.03);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center; /* 內容置中 */
      text-align: center; /* 文字置中 */
      min-width: 0; /* 防止 Grid 破版 */
    }
    
    .why-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 24px rgba(200,164,93,0.15);
      border-color: var(--gold);
      z-index: 2;
    }

    .why-item h3 { 
      font-size:18px; 
      font-weight:700; 
      color:var(--green-dark); 
      margin:0 0 12px 0; 
      line-height: 1.4;
    }
    .why-item p { 
      font-size:15px; 
      color:#555; 
      margin:0; 
      text-align: left; /* 內文保持靠左閱讀較舒適 */
      line-height: 1.7; 
    }
    
    /* 手機版樣式 */
    .why-mob { display:none; }
    .why-mob-list { display:flex; flex-direction:column; gap:16px; }
    .why-mob-card {
      background: #fff;
      border: 1px solid #e6e6e6;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      transition: transform 0.2s;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .why-mob-card:active { transform: scale(0.98); }
    
    .why-mob-card h4 { 
      font-size:16px; 
      font-weight:700; 
      color:var(--green-dark); 
      margin:0 0 8px 0; 
      line-height: 1.4;
    }
    .why-mob-card p { 
      font-size:14px; 
      color:#555; 
      margin:0; 
      text-align: left;
      line-height: 1.6; 
    }

    @media (max-width: 760px) {
      .why-desk { display:none; }
      .why-mob { display:block; }
      .why-grid { grid-template-columns: 1fr; } /* 保險起見 */
    }

    /* === 修改處：減少「為什麼選擇 MOPO」與「課程價格」之間的間距 === */
    #why-mopo { padding-bottom: 30px; }
    #pricing { padding-top: 30px; }
    @media (max-width: 760px) {
        #why-mopo { padding-bottom: 20px !important; }
        #pricing { padding-top: 20px !important; }
    }
  </style>
</head>
<body>
<header class="topbar" id="topbar">
  <div class="container nav">
    <div class="brand">
      <a href="#home" class="logo" aria-label="回到首頁">MOPO Ski School</a>
    </div>
    <ul class="menu" role="menubar" aria-label="網站導覽">
      <li role="none"><a role="menuitem" href="news.html">最新消息</a></li>
      <li role="none"><a role="menuitem" href="mopo.html">關於 MOPO</a></li>
      <li class="has-dropdown" role="none">
        <a role="menuitem" href="#" aria-haspopup="true" aria-expanded="false">滑雪課程 <span class="caret">▾</span></a>
        <ul class="submenu" role="menu" aria-label="滑雪課程子選單">
          <li role="none"><a role="menuitem" href="#pricing">課程與價格</a></li>
          <li class="group-title">雪場介紹</li>
          <li role="none"><a role="menuitem" href="teine.html">札幌手稻</a></li>
          <li role="none"><a role="menuitem" href="onze.html">小樽ONZE</a></li>
          <li role="none"><a role="menuitem" href="kokusai.html">札幌國際</a></li>
        </ul>
      </li>
      <li class="has-dropdown" role="none">
        <a role="menuitem" href="#" aria-haspopup="true" aria-expanded="false">主題文章 <span class="caret">▾</span></a>
        <ul class="submenu" role="menu" aria-label="主題文章子選單">
          <li role="none"><a role="menuitem" href="safe.html">專欄文章</a></li>
          <li role="none"><a role="menuitem" href="trip.html">觀光主題</a></li>
        </ul>
      </li>
      <li role="none"><a role="menuitem" href="faq.html">常見問題</a></li>
    <li role="none"><a role="menuitem" href="booking.html" target="_blank" rel="noopener noreferrer">預約</a></li>
    </ul>
    <div class="lang">
      <select id="langSelect" aria-label="選擇語言">
        <option value="zh-Hant" selected>繁體中文</option>
        <option value="ja">日本語</option>
        <option value="en">English</option>
      </select>
    </div>
    <div class="mobtools" aria-label="行動工具">
      <div class="mobdrop" id="mobLangDrop">
        <button class="mobLangBtn" id="mobLangBtn" aria-label="語言">語言</button>
        <div class="mobpanel" id="mobLangPanel" role="menu" aria-label="語言選單">
          <a role="menuitem" data-lang="zh-Hant" href="#" aria-current="true">繁體中文</a>
          <a role="menuitem" data-lang="ja" href="#">日本語</a>
          <a role="menuitem" data-lang="en" href="#">English</a>
        </div>
      </div>
      <div class="mobdrop" id="mobNavDrop">
        <button class="iconbtn" aria-label="開啟導覽" id="mobNavBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h18" stroke="#333" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <div class="mobpanel" id="mobNavPanel" role="menu" aria-label="行動導覽">
          <a href="news.html" role="menuitem">最新消息</a>
          <a href="mopo.html" role="menuitem">關於 MOPO</a>
          <div class="mob-subtitle">滑雪課程</div>
          <a href="#pricing" role="menuitem">課程與價格</a>
          <div class="mob-subtitle">雪場介紹</div>
          <a href="teine.html" role="menuitem">札幌手稻</a>
          <a href="onze.html" role="menuitem">小樽ONZE</a>
          <a href="kokusai.html" role="menuitem">札幌國際</a>
          <div class="mob-subtitle">主題文章</div>
          <a href="safe.html" role="menuitem">專欄文章</a>
          <a href="trip.html" role="menuitem">觀光主題</a>
          <a href="faq.html" role="menuitem">常見問題</a>
          <a href="booking.html" role="menuitem" target="_blank" rel="noopener noreferrer">預約</a>
        </div>
      </div>
    </div>
  </div>
</header>
<div id="mobOverlay" aria-hidden="true" hidden></div>
<main>
  <section class="hero" id="home" aria-label="英雄區">
    <div class="hero__bg" id="heroBg" aria-hidden="true">
      <div class="slide active"></div>
      <div class="slide"></div>
      <div class="slide"></div>
    </div>
    <div class="container hero__wrap">
      <div class="content">
        <h1 class="reveal" aria-label="MOPO Ski School">
          <span class="logoLine">
            <span class="main">MOPO</span>
            <span class="sub">ski school</span>
          </span>
        </h1>
        <p class="subtitle reveal">日本北海道滑雪｜<span class="txt-hide-mob">多國語言教練，</span>量身打造的學習體驗。</p>
        <div class="cta reveal" style="gap:12px">
          <a href="#pricing" class="btn" aria-label="課程與價格">課程與價格</a>
         <a href="booking.html" class="btn" aria-label="預約" target="_blank" rel="noopener noreferrer">預約課程</a>
        </div>
        <section class="news reveal" id="news" aria-label="最新消息">
          <div class="news-viewport">
            <div class="news-row" id="newsRow">
             <a class="news-card" href="./news.html">
  <img src="news/news-1.png" alt="最新消息 1" loading="lazy" decoding="async">
</a>
              <a class="news-card" href="./trip1/tripteine6days.html"><img src="news/news-2.jpg" alt="最新消息 2" loading="lazy" decoding="async"></a>
              <a class="news-card" href="teine.html"><img src="news/news-3.png" alt="最新消息 3" loading="lazy" decoding="async"></a>
              <a class="news-card" href="kokusai.html"><img src="news/news-4.png" alt="最新消息 4" loading="lazy" decoding="async"></a>
<a class="news-card" href="onze.html"><img src="news/news-5.png" alt="最新消息 5" loading="lazy" decoding="async"></a>
            </div>
          </div>
        </section>
      </div>
    </div>
    <div class="hero-dots" id="heroDots" aria-label="Hero 指示器">
      <button data-slide="0" class="active" aria-label="第 1 張"></button>
      <button data-slide="1" aria-label="第 2 張"></button>
      <button data-slide="2" aria-label="第 3 張"></button>
    </div>
  </section>
  <section id="about-mopo" class="section about-hero" aria-label="關於 MOPO">
    <div class="about-hero__bg" aria-hidden="true">
      <picture>
        <source type="image/webp" srcset="img/mopo-640.webp 640w, img/mopo-960.webp 960w, img/mopo-1280.webp 1280w, img/mopo-1920.webp 1920w" sizes="(max-width: 760px) 100vw, 1200px">
        <img src="img/mopo-1280.jpg" srcset="img/mopo-640.jpg 640w, img/mopo-960.jpg 960w, img/mopo-1280.jpg 1280w, img/mopo-1920.jpg 1920w" sizes="(max-width: 760px) 100vw, 1200px" alt="" width="1920" height="924" decoding="async" loading="eager" fetchpriority="high">
      </picture>
    </div>
    <div class="container about-hero__content">
      <h2 class="visually-hidden">關於 MOPO</h2>
      <div class="lines" aria-label="MOPO 的介紹">
        <div class="line big"><span>MOPO</span></div>
        <div class="line sub"><span>Formosa（美麗之島）與 Japow（粉雪）</span></div>
        <div class="line sub"><span>朝陽與夕照、粉雪、山脈</span></div>
        <div class="line sub"><span>映現並承載自然之美</span></div>
      </div>
      <a class="about-btn" href="mopo.html" aria-label="關於 MOPO">關於 MOPO</a>
    </div>
  </section>

  <!-- 新增：為什麼選擇 MOPO (Icon 上方版) -->
  <section id="why-mopo" class="section reveal" aria-label="為什麼選擇 MOPO">
    <div class="container">
      <div class="section__head">
        <h2>為什麼選擇 MOPO 滑雪學校？</h2>
      </div>
      
      <!-- 桌機版 -->
      <div class="why-desk">
        <div class="why-grid">
          <div class="why-item">
            <!-- 圓潤可愛雪花 -->
            <svg class="snow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"/><path d="M2 12h20"/>
              <path d="m4.93 4.93 14.14 14.14"/><path d="m4.93 19.07 14.14-14.14"/>
            </svg>
            <h3>1. 日本合法立案，官方認證</h3>
            <p>我們是日本登記在案的正規公司，並擁有雪場的教學許可認證。給您合法、安心、有保障的教學品質，滑雪之旅無後顧之憂。</p>
          </div>
          <div class="why-item">
            <svg class="snow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"/><path d="M2 12h20"/>
              <path d="m4.93 4.93 14.14 14.14"/><path d="m4.93 19.07 14.14-14.14"/>
            </svg>
            <h3>2. 精緻小班教學，量身訂製</h3>
            <p>堅持小班制教學，確保教練能專注於每一位學員。針對您的體能與進度，即時調整教學內容，為您打造最有效率的專屬課程。</p>
          </div>
          <div class="why-item">
            <svg class="snow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"/><path d="M2 12h20"/>
              <path d="m4.93 4.93 14.14 14.14"/><path d="m4.93 19.07 14.14-14.14"/>
            </svg>
            <h3>3. 多語系溝通，旅客溝通無障礙</h3>
            <p>專為台灣、香港、新加坡及馬來西亞旅客設計。支援中文、廣東話、英文、日文及台語，無論您習慣哪種語言，上課都能零障礙、好溝通。</p>
          </div>
          <div class="why-item">
            <svg class="snow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"/><path d="M2 12h20"/>
              <path d="m4.93 4.93 14.14 14.14"/><path d="m4.93 19.07 14.14-14.14"/>
            </svg>
            <h3>4. 專屬影像紀錄，珍藏回憶</h3>
            <p>課程中為您捕捉帥氣瞬間與學習歷程。課後提供高清照片與影片，既是珍貴的旅行回憶，更是檢視動作、持續進步的最佳素材。</p>
          </div>
        </div>
      </div>

      <!-- 手機版 -->
      <div class="why-mob">
        <div class="why-mob-list">
          <div class="why-mob-card">
            <svg class="snow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"/><path d="M2 12h20"/>
              <path d="m4.93 4.93 14.14 14.14"/><path d="m4.93 19.07 14.14-14.14"/>
            </svg>
            <h4>【日本合法立案】</h4>
            <p>雪場官方許可學校，給您最安心的滑雪保障。</p>
          </div>
          <div class="why-mob-card">
            <svg class="snow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"/><path d="M2 12h20"/>
              <path d="m4.93 4.93 14.14 14.14"/><path d="m4.93 19.07 14.14-14.14"/>
            </svg>
            <h4>【專屬進度規劃】</h4>
            <p>堅持小班教學，針對個人體能調整，不再怕跟不上。</p>
          </div>
          <div class="why-mob-card">
            <svg class="snow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"/><path d="M2 12h20"/>
              <path d="m4.93 4.93 14.14 14.14"/><path d="m4.93 19.07 14.14-14.14"/>
            </svg>
            <h4>【多國語言支援】</h4>
            <p>支援中文、廣東話、英語、日語、台語，上課就像朋友聊天般輕鬆。</p>
          </div>
          <div class="why-mob-card">
            <svg class="snow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"/><path d="M2 12h20"/>
              <path d="m4.93 4.93 14.14 14.14"/><path d="m4.93 19.07 14.14-14.14"/>
            </svg>
            <h4>【滑行影音留念】</h4>
            <p>教練幫您拍美照與影片，是回憶也是動作檢視的最佳幫手。</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="pricing" class="section reveal" aria-label="課程與價格">
    <div class="container">
      <div class="section__head">
        <h2>課程與價格</h2>
        <p class="muted">全日 6 小時（含 1 小時休息）。<span class="mobbr"><br></span>金額為含稅價格。</p>
      </div>

      <div class="pricelist" id="courseList">
      
        <!-- 1. 手稻 TEINE -->
        <details class="pricecard" id="teine">
          <summary>
            <!-- Mobile Only Thumbnail -->
            <img class="mobile-thumb" src="img/news/teine.jpg" alt="手稻滑雪場" loading="lazy">
            <div class="head">
              <div class="title">手稻｜私人課（全日/半日）</div>
              <div class="desc">
                <span class="desktop-desc">雪質穩定，交通便利。適合初學者與家庭滑雪的最佳選擇。</span>
                <span class="mobile-desc">雪質穩定，交通便利。</span>
              </div>
            </div>
            
            <div class="fromrow">
               <div class="price-tag-group left">
                  <span class="pt-label">Half Day</span>
                  <span class="pt-price">37,500<small>JPY 起</small></span>
               </div>
               <div class="price-divider"></div>
               <div class="price-tag-group right">
                  <span class="pt-label">Full Day</span>
                  <span class="pt-price">60,000<small>JPY 起</small></span>
               </div>
            </div>
            
            <!-- New: Explicit Expand Button/Hint -->
            <div class="expand-hint">
               ▼ 點擊查看詳細價格與日期
            </div>

            <!-- Summary Buttons (Hidden when open) -->
            <div class="summary-btns">
                <button class="btn-sm" onclick="event.stopPropagation(); window.location.href='teine.html'">雪場介紹</button>
                <button class="btn-sm" onclick="event.stopPropagation(); window.open('booking.html', '_blank')">預約課程</button>
            </div>
          </summary>
          <div class="pricetable">
            <div class="busy-dates">
              繁忙期：2025/12/20～01/05・2026/02/12～02/22
            </div>
            <!-- 卡片內部分頁切換 -->
            <div class="local-tabs">
              <button class="tab-btn active" data-tab="standard">平日標準</button>
              <button class="tab-btn" data-tab="busy">繁忙期</button>
              <button class="tab-btn" data-tab="spring">春季時段 (3/2~5/6)</button>
            </div>
            
            <div class="course-type-block">
              <span class="course-type-title">全日課程 (6小時,含1小時休息） 9:30-15:30</span>
              <div>
                <!-- 標準價格 -->
                <div class="season standard active">
                  <table class="table" aria-label="手稻・標準期間價目表">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 72,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 77,000</td><td class="pp">（每人 日幣 38,500）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 82,000</td><td class="pp">（每人 日幣 27,333）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 87,000</td><td class="pp">（每人 日幣 21,750）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 92,000</td><td class="pp">（每人 日幣 18,400）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 繁忙期價格 -->
                <div class="season busy">
                  <table class="table" aria-label="手稻・繁忙期間價目表">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 82,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 87,000</td><td class="pp">（每人 日幣 43,500）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 92,000</td><td class="pp">（每人 日幣 30,666）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 97,000</td><td class="pp">（每人 日幣 24,250）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 102,000</td><td class="pp">（每人 日幣 20,400）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 春季價格 (New) -->
                <div class="season spring">
                  <table class="table" aria-label="手稻・春季價目表">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 60,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 63,000</td><td class="pp">（每人 日幣 31,500）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 66,000</td><td class="pp">（每人 日幣 22,000）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 68,000</td><td class="pp">（每人 日幣 17,000）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 70,000</td><td class="pp">（每人 日幣 14,000）</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- B. 半日課程區塊 (新增) -->
            <div class="course-type-block">
              <span class="course-type-title">半日課程 (3小時) 9:30-12:30 或 13:30-16:30</span>
              <div>
                <!-- 標準半日 -->
                <div class="season standard active">
                  <table class="table" aria-label="手稻・標準期間半日價目表">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 44,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 48,000</td><td class="pp">（每人 日幣 24,000）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 51,000</td><td class="pp">（每人 日幣 17,000）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 54,000</td><td class="pp">（每人 日幣 13,500）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 57,000</td><td class="pp">（每人 日幣 11,400）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 繁忙期半日 (不提供) -->
                <div class="season busy" style="background:#f9f9f9; border-color:#e0e0e0;">
                  <div style="padding: 24px 10px; text-align:center; color:#666;">
                    <p style="font-size:15px; margin:0; font-weight:700; color:#444;">為維護教學品質，繁忙期間僅開放全日課程預約，敬請見諒。</p>
                  </div>
                </div>

                <!-- 春季半日 -->
                <div class="season spring">
                  <table class="table" aria-label="手稻・春季半日價目表">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 37,500</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 40,000</td><td class="pp">（每人 日幣 20,000）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 42,000</td><td class="pp">（每人 日幣 14,000）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 44,000</td><td class="pp">（每人 日幣 11,000）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 46,000</td><td class="pp">（每人 日幣 9,200）</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="note-row">
              <div class="note">
                <p>＊小提醒：除繁忙期與春季期外，皆適用標準價格；費用請依時間表為準</p>
                <p>＊小班制為維護品質最多上課人數為5人</p>
                <p>＊已含第三人責任保險。纜車票・器材・交通・午餐未包含。</p>
              </div>
              <div class="btns">
                <a class="btn" href="teine.html">雪場介紹</a>
               <a class="btn" href="booking.html" target="_blank" rel="noopener noreferrer">預約課程</a>
              </div>
            </div>
            <div class="cta-row">
              <a class="btn" href="teine.html">雪場介紹</a>
           <a class="btn" href="booking.html" target="_blank" rel="noopener noreferrer">預約課程</a>
            </div>
          </div>
        </details>

        <!-- 2. 小樽 ONZE -->
        <details class="pricecard" id="onze">
          <summary>
            <!-- Mobile Only Thumbnail -->
            <img class="mobile-thumb" src="img/news/onze.png" alt="小樽ONZE滑雪場" loading="lazy">
            <div class="head">
              <div class="title">ONZE｜私人課 (全日/半日/夜滑)</div>
              <div class="desc">
                <span class="desktop-desc">坐擁石狩灣海景，交通最便利。營業時間長，是體驗浪漫夜滑與欣賞絕美夜景的唯一選擇。</span>
                <span class="mobile-desc">石狩灣海景，交通最便利。</span>
              </div>
            </div>
            <div class="fromrow">
               <div class="price-tag-group left">
                  <span class="pt-label">Half Day</span>
                  <span class="pt-price">26,000<small>JPY 起</small></span>
               </div>
               <div class="price-divider"></div>
               <div class="price-tag-group right">
                  <span class="pt-label">Full Day</span>
                  <span class="pt-price">60,000<small>JPY 起</small></span>
               </div>
            </div>
            
            <!-- New: Explicit Expand Button/Hint -->
            <div class="expand-hint">
               ▼ 點擊查看詳細價格與日期
            </div>

            <!-- Summary Buttons (Always Visible) -->
            <div class="summary-btns">
                <button class="btn-sm" onclick="event.stopPropagation(); window.location.href='onze.html'">雪場介紹</button>
                <button class="btn-sm" onclick="event.stopPropagation(); window.open('booking.html', '_blank')">預約課程</button>
            </div>
          </summary>
          <div class="pricetable">
            <div class="busy-dates">
              繁忙期：2025/12/20～01/05・2026/02/12～02/22
            </div>
            <!-- 卡片內部分頁切換 -->
            <div class="local-tabs">
              <button class="tab-btn active" data-tab="standard">平日標準</button>
              <button class="tab-btn" data-tab="busy">繁忙期</button>
              <button class="tab-btn" data-tab="spring">春季時段 (3/2~3/28)</button>
            </div>
            
            <!-- A. 全日課程區塊 -->
            <div class="course-type-block">
              <span class="course-type-title">全日課程 (6小時,含1小時休息） 9:30-15:30</span>
              <div>
                <!-- 標準全日 -->
                <div class="season standard active">
                  <table class="table">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 72,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 77,000</td><td class="pp">（每人 日幣 38,500）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 82,000</td><td class="pp">（每人 日幣 27,333）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 87,000</td><td class="pp">（每人 日幣 21,750）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 92,000</td><td class="pp">（每人 日幣 18,400）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 繁忙期全日 -->
                <div class="season busy">
                  <table class="table">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 82,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 87,000</td><td class="pp">（每人 日幣 43,500）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 92,000</td><td class="pp">（每人 日幣 30,666）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 97,000</td><td class="pp">（每人 日幣 24,250）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 102,000</td><td class="pp">（每人 日幣 20,400）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 春季全日 -->
                <div class="season spring">
                  <table class="table">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 60,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 63,000</td><td class="pp">（每人 日幣 31,500）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 66,000</td><td class="pp">（每人 日幣 22,000）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 68,000</td><td class="pp">（每人 日幣 17,000）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 70,000</td><td class="pp">（每人 日幣 14,000）</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- B. 半日課程區塊 -->
            <div class="course-type-block">
              <span class="course-type-title">半日課程 (3小時) 9:30-12:30 或 13:30-16:30</span>
              <div>
                <!-- 標準半日 -->
                <div class="season standard active">
                  <table class="table">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 44,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 48,000</td><td class="pp">（每人 日幣 24,000）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 51,000</td><td class="pp">（每人 日幣 17,000）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 54,000</td><td class="pp">（每人 日幣 13,500）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 57,000</td><td class="pp">（每人 日幣 11,400）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 繁忙期半日 (不提供) -->
                <div class="season busy" style="background:#f9f9f9; border-color:#e0e0e0;">
                  <div style="padding: 24px 10px; text-align:center; color:#666;">
                    <p style="font-size:15px; margin:0; font-weight:700; color:#444;">為維護教學品質，繁忙期間僅開放全日課程預約，敬請見諒。</p>
                  </div>
                </div>

                <!-- 春季半日 -->
                <div class="season spring">
                  <table class="table">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 37,500</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 40,000</td><td class="pp">（每人 日幣 20,000）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 42,000</td><td class="pp">（每人 日幣 14,000）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 44,000</td><td class="pp">（每人 日幣 11,000）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 46,000</td><td class="pp">（每人 日幣 9,200）</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- C. 夜滑課程區塊 -->
            <div class="course-type-block">
              <span class="course-type-title">夜滑課程 (2小時) 17:00-19:00</span>
              <div>
                <!-- 標準夜滑 -->
                <div class="season standard active">
                  <table class="table">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 32,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 36,000</td><td class="pp">（每人 日幣 18,000）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 40,000</td><td class="pp">（每人 日幣 13,333）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 44,000</td><td class="pp">（每人 日幣 11,000）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 48,000</td><td class="pp">（每人 日幣 9,600）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 繁忙期夜滑 (保留) -->
                <div class="season busy">
                  <table class="table">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 38,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 42,000</td><td class="pp">（每人 日幣 21,000）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 46,000</td><td class="pp">（每人 日幣 15,333）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 50,000</td><td class="pp">（每人 日幣 12,500）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 54,000</td><td class="pp">（每人 日幣 10,800）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 春季夜滑 -->
                <div class="season spring">
                  <table class="table">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 26,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 29,000</td><td class="pp">（每人 日幣 14,500）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 32,000</td><td class="pp">（每人 日幣 10,666）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 34,000</td><td class="pp">（每人 日幣 8,500）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 36,000</td><td class="pp">（每人 日幣 7,200）</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="note-row">
              <div class="note">
                <p>＊小提醒：除繁忙期與春季期外，皆適用標準價格；費用請依時間表為準</p>
                <p>＊小班制為維護品質最多上課人數為5人</p>
                <p>＊已含第三人責任保險。纜車票・器材・交通・午餐未包含。</p>
              </div>
              <div class="btns">
                <a class="btn" href="onze.html">雪場介紹</a>
            <a class="btn" href="booking.html" target="_blank" rel="noopener noreferrer">預約課程</a>
              </div>
            </div>
            <div class="cta-row">
              <a class="btn" href="onze.html">雪場介紹</a>
              <a class="btn" href="booking.html" target="_blank" rel="noopener noreferrer">預約課程</a>
            </div>
          </div>
        </details>

        <!-- 3. 札幌國際 KOKUSAI -->
        <details class="pricecard" id="kokusai">
          <summary>
            <!-- Mobile Only Thumbnail -->
            <img class="mobile-thumb" src="img/news/kokusai.jpg" alt="札幌國際滑雪場" loading="lazy">
            <div class="head">
              <div class="title">札幌國際｜私人課（全日）</div>
              <div class="desc">
                <span class="desktop-desc">札幌近郊雪質最佳的首選。雪道寬敞、視野開闊，設施完善且對兒童友善，是家庭滑雪的完美去處。</span>
                <span class="mobile-desc">札幌近郊雪質最佳的首選。</span>
              </div>
            </div>
            <div class="fromrow">
               <div class="price-tag-group left">
                  <span class="pt-label">Full Day</span>
                  <span class="pt-price">62,000<small>JPY 起</small></span>
               </div>
            </div>
            
            <!-- New: Explicit Expand Button/Hint -->
            <div class="expand-hint">
               ▼ 點擊查看詳細價格與日期
            </div>

            <!-- Summary Buttons (Always Visible) -->
            <div class="summary-btns">
                <button class="btn-sm" onclick="event.stopPropagation(); window.location.href='kokusai.html'">雪場介紹</button>
                <button class="btn-sm" onclick="event.stopPropagation(); window.open('booking.html', '_blank')">預約課程</button>
            </div>
          </summary>
          <div class="pricetable">
            <div class="busy-dates">
              繁忙期：2025/12/20～01/05・2026/02/12～02/22
            </div>
            <!-- 卡片內部分頁切換 -->
            <div class="local-tabs">
              <button class="tab-btn active" data-tab="standard">平日標準</button>
              <button class="tab-btn" data-tab="busy">繁忙期</button>
              <button class="tab-btn" data-tab="spring">春季時段 (3/2~5/6)</button>
            </div>
            
            <div class="course-type-block">
              <span class="course-type-title">全日課程 (6小時,含1小時休息） 9:30-15:30</span>
              <div>
                <!-- 標準價格 -->
                <div class="season standard active">
                  <table class="table" aria-label="札幌國際・平日價目表">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 84,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 90,000</td><td class="pp">（每人 日幣 45,000）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 96,000</td><td class="pp">（每人 日幣 32,000）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 102,000</td><td class="pp">（每人 日幣 25,500）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 108,000</td><td class="pp">（每人 日幣 21,600）</td></tr>
                    </tbody>
                  </table>
                </div>
                
                <!-- 繁忙期價格 -->
                <div class="season busy">
                  <table class="table" aria-label="札幌國際・繁忙期價目表">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 94,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 100,000</td><td class="pp">（每人 日幣 50,000）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 106,000</td><td class="pp">（每人 日幣 35,333）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 112,000</td><td class="pp">（每人 日幣 28,000）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 118,000</td><td class="pp">（每人 日幣 23,600）</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- 春季價格 (New) -->
                <div class="season spring">
                  <table class="table" aria-label="札幌國際・春季價目表">
                    <thead><tr><th class="people">人數</th><th class="price">金額</th><th></th></tr></thead>
                    <tbody>
                      <tr><td class="people">1 人</td><td class="price">日幣 62,000</td><td></td></tr>
                      <tr><td class="people">2 人</td><td class="price">日幣 65,000</td><td class="pp">（每人 日幣 32,500）</td></tr>
                      <tr><td class="people">3 人</td><td class="price">日幣 68,000</td><td class="pp">（每人 日幣 22,666）</td></tr>
                      <tr><td class="people">4 人</td><td class="price">日幣 70,000</td><td class="pp">（每人 日幣 17,500）</td></tr>
                      <tr><td class="people">5 人</td><td class="price">日幣 72,000</td><td class="pp">（每人 日幣 14,400）</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="note-row">
              <div class="note">
                <p>＊小提醒：除繁忙期與春季期外，皆適用標準價格；費用請依時間表為準</p>
                <p>＊小班制為維護品質最多上課人數為5人</p>
                <p>＊已含第三人責任保險。纜車票・器材・交通・午餐未包含。</p>
              </div>
              <div class="btns">
                <a class="btn" href="kokusai.html">雪場介紹</a>
              <a class="btn" href="booking.html" target="_blank" rel="noopener noreferrer">預約課程</a>
              </div>
            </div>
            <div class="cta-row">
              <a class="btn" href="kokusai.html">雪場介紹</a>
        <a class="btn" href="booking.html" target="_blank" rel="noopener noreferrer">預約課程</a>
            </div>
          </div>
        </details>
      </div>
    </div>
  </section>
  <section id="contact" class="section" aria-label="聯絡我們">
    <div class="container">
      <div class="section__head"><h2>聯絡我們</h2></div>
      <div class="contact-grid">
        <form id="contactForm" class="form" aria-label="聯絡表單">
          <input type="text" name="name" placeholder="姓名" required class="reveal" aria-label="姓名">
          <input type="email" name="email" placeholder="Email" required class="reveal" aria-label="Email">
          <input type="tel" name="phone" placeholder="電話（選填）" class="reveal" aria-label="電話（選填）">
          <textarea name="notes" placeholder="備註（課程需求／滑雪等級／預計日期等）" rows="5" class="reveal" aria-label="備註"></textarea>
          <button class="btn reveal" type="submit" style="justify-self:start">送出</button>
          <div id="contactMsg" style="font-size:18px; color:#0a7a3c"></div>
        </form>
        <aside aria-label="社群與聯絡方式" class="reveal" style="align-self:start">
          <h3 style="margin:0 0 8px 0;font-size:18px;color:#111">追蹤我們</h3>
          <div class="sns" style="display:flex; gap:16px; flex-wrap:wrap;">
            
            <a href="https://www.threads.com/@moposkischool" target="_blank" rel="noopener noreferrer" aria-label="Threads">
              <img src="logo/threads.png" alt="Threads" width="28" height="28" loading="lazy" decoding="async">
            </a>
            <a href="https://www.instagram.com/moposkischool/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
              <img src="logo/ig.png" alt="Instagram" width="28" height="28" loading="lazy" decoding="async">
            </a>
            <a href="https://www.facebook.com/profile.php?id=61581290857769" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
              <img src="logo/fb.png" alt="Facebook" width="28" height="28" loading="lazy" decoding="async">
            </a>
            <a href="https://lin.ee/l9ZY79L" target="_blank" rel="noopener noreferrer" aria-label="LINE">
              <img src="logo/line.png" alt="LINE" width="28" height="28" loading="lazy" decoding="async">
            </a>
          </div>
        </aside>
      </div>
    </div>
  </section>
</main>
<footer class="footer" role="contentinfo">
  <section class="sitemap" aria-label="網站地圖">
    <div class="container">
      <div class="cols">
        <div>
          <h4>最新消息</h4>
          <ul>
            <li><a href="/news">News</a></li>
            <li><a href="#about-mopo">關於 MOPO</a></li>
          </ul>
        </div>
        <div>
          <h4>滑雪課程</h4>
          <ul>
            <li><a href="#pricing">課程與價格</a></li>
            <li><a href="teine.html">札幌手稻</a></li>
            <li><a href="onze.html">小樽ONZE</a></li>
            <li><a href="kokusai.html">札幌國際</a></li>
          </ul>
        </div>
        <div>
          <h4>主題文章</h4>
          <ul>
            <li><a href="safe.html">專欄文章</a></li>
            <li><a href="trip.html">觀光主題</a></li>
          </ul>
        </div>
        <div>
          <h4>資訊</h4>
          <ul>
            <li><a href="legal_tokusho.html">公司資訊</a></li>
            <li><a href="notice.html">報名須知</a></li>
            <li><a href="faq.html">常見問題</a></li>
            <li><a href="#contact">聯絡我們</a></li>
          </ul>
        </div>
      </div>
      <div style="display:flex; justify-content:space-between; align-items:center; padding-top:12px; border-top:1px solid rgba(255,255,255,.25); margin-top:18px">
        <div>© <span id="year"></span> MOPO Ski School</div>
      </div>
    </div>
  </section>
</footer>
<div class="fab">
  <button id="backTop" aria-label="回到頂部">
    <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5l7 7h-5v7H10v-7H5z" fill="#333"/></svg>
  </button>
</div>
<script>
/**
 * ====================================================================
 * COMMON LOGIC (Derived from common.js)
 * - Year, Topbar behavior, Dynamic Language Switch, Mobile Menu, Favicon
 * ====================================================================
 */

// 1. 顯示年份 & 頂端列高度補償
document.getElementById('year').textContent = new Date().getFullYear();
(function(){
  const topbar = document.getElementById('topbar');
  function applySpacer(){
    if(!topbar) return;
    document.body.style.paddingTop = topbar.offsetHeight + 'px';
  }
  applySpacer();
  window.addEventListener('resize', applySpacer);
})();

// 2. Topbar Scrolled / Hide on scroll down
const topbar = document.getElementById('topbar');
function setTopbar(){ topbar.classList.toggle('scrolled', window.scrollY > 10) }
setTopbar(); 
window.addEventListener('scroll', setTopbar, {passive:true});

(function(){
  const topbar = document.getElementById('topbar');
  let lastScrollY = window.scrollY, ticking = false;
  function update() {
    const currentY = window.scrollY;
    if (currentY > lastScrollY && currentY > 100) topbar.classList.add('hide');
    else topbar.classList.remove('hide');
    lastScrollY = currentY; ticking = false;
  }
  window.addEventListener('scroll', () => {
    if (!ticking) { 
      window.requestAnimationFrame(update); 
      ticking = true; 
    }
  }, { passive: true });
})();

// 3. 語言切換（動態版）
(function () {
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initLang);
  } else {
    initLang();
  }

  function initLang() {
    // e.g. /news/ja_contactmopo.html → dir="/news/", file="ja_contactmopo.html"
    const path = (location.pathname || '');
    const dir  = path.replace(/[^/]*$/, '');             // 目前資料夾（含結尾 /）
    const file = (path.split('/').pop() || 'index.html'); // 檔名

    // 去掉語言前綴（ja_ / en_）
    const base = file.replace(/^(ja_|en_)/i, '');

    // 語言值標準化
    const norm = (v)=>{
      const s = String(v||'').trim().toLowerCase();
      if (s==='ja' || s==='jp' || s==='ja-jp') return 'ja';
      if (s==='en' || s==='en-us' || s==='en-gb') return 'en';
      if (s==='zh' || s==='zh-tw' || s==='tw' || s==='zh_hant' || s==='zh-hant') return 'zh-Hant';
      return 'zh-Hant';
    };

    // 語言前綴
    const prefixOf = { 'zh-Hant': '', ja: 'ja_', en: 'en_' };

    // 🔧 檔名特例處理
    function baseFor(lang){
      // 針對首頁 index.html 的特殊處理：
      // 如果目前是 index.html，切換到日文/英文時應為 ja_mopoindex.html / en_mopoindex.html
      // 如果目前是 mopoindex.html，切換到中文時應為 index.html
      if (base === 'index.html' && (lang === 'ja' || lang === 'en')) return 'mopoindex.html';
      if (base === 'mopoindex.html' && lang === 'zh-Hant') return 'index.html';
      
      // 其他頁面的特例（如 mopoindex -> mopo）
      if (base === 'mopoindex.html' && lang === 'zh-Hant') return 'mopo.html';
      return base;
    }

    // 產生目標 URL
    function targetUrl(langRaw){
      const lang   = norm(langRaw);
      const prefix = prefixOf[lang] ?? '';
      const next   = prefix + baseFor(lang);
      return new URL(dir + next, location.href).href;
    }

    function go(langRaw){
      const url = targetUrl(langRaw);
      if (url !== location.href) location.href = url;
    }

    // 桌機 <select>
    const sel = document.getElementById('langSelect');
    if (sel){
      const on = ()=> go(sel.value);
      sel.addEventListener('change', on);
      sel.addEventListener('input',  on);
    }

    // 手機語言面板（data-lang）
    const panel = document.getElementById('mobLangPanel');
    if (panel){
      panel.addEventListener('click', (e)=>{
        const a = e.target.closest('[data-lang]');
        if(!a) return;
        e.preventDefault();
        go(a.getAttribute('data-lang'));
      });
    }
  }
})();

// 4. 手機語言 & 導覽面板
(function(){
  const overlay   = document.getElementById('mobOverlay');
  const langBtn   = document.getElementById('mobLangBtn');
  const langPanel = document.getElementById('mobLangPanel');
  const navBtn    = document.getElementById('mobNavBtn');
  const navPanel  = document.getElementById('mobNavPanel');

  const IOS16 = (() => {
    const ua = navigator.userAgent || "";
    const isIOS = /iP(ad|hone|od)/.test(ua);
    const m = ua.match(/OS (\d+)_/);
    const major = m ? parseInt(m[1], 10) : 0;
    return isIOS && major === 16;
  })();

  function closePanels(){
    langPanel?.classList.remove('show');
    navPanel?.classList.remove('show');
    overlay?.classList.remove('show');
    overlay?.classList.remove('noblur');
    if(overlay) overlay.hidden = true;
  }
  function openPanel(panel){
    if(panel !== langPanel) langPanel?.classList.remove('show');
    if(panel !== navPanel)  navPanel?.classList.remove('show');
    if(overlay){
      overlay.hidden = false;
      overlay.classList.add('show');
      if(IOS16) overlay.classList.add('noblur');
    }
    panel?.classList.add('show');
  }
  function togglePanel(panel){
    if(panel?.classList.contains('show')) closePanels();
    else openPanel(panel);
  }

  langBtn?.addEventListener('click', (e)=>{ e.stopPropagation(); togglePanel(langPanel); });
  navBtn?.addEventListener('click',  (e)=>{ e.stopPropagation(); togglePanel(navPanel);  });

  overlay?.addEventListener('click', closePanels);
  document.addEventListener('click', (e)=>{
    if(e.target.closest('.mobdrop')) return;
    closePanels();
  });
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePanels(); });

  navPanel?.addEventListener('click', (e)=>{
    const a = e.target.closest('a[href]');
    if(!a) return;
    e.preventDefault();
    const href = a.getAttribute('href') || '#';
    closePanels();
    setTimeout(()=>{
      if(href.startsWith('#')){
        const el = document.querySelector(href);
        if(el){ el.scrollIntoView({behavior:'smooth', block:'start'}); }
        else { window.location.href = href; }
      }else{
        window.location.href = href;
      }
    }, 0);
  });
})();

// 5. 回到頂部
document.getElementById('backTop')?.addEventListener('click', ()=> 
  window.scrollTo({top:0, behavior:'smooth'}));

// 6. 動態插入 Favicon
(function() {
  if (document.querySelector('link[rel="icon"]') || document.querySelector('link[rel="shortcut icon"]')) {
      return;
  }
  var link = document.createElement('link');
  link.rel = 'icon shortcut icon';
  link.href = '/logom.png';
  link.type = 'image/png';
  document.head.appendChild(link);
})();


/**
 * ====================================================================
 * PAGE SPECIFIC LOGIC (Retained from original Index.html)
 * - Hero Slider, News Slider, Reveal Animations, Pricing, Contact, MOPO Parallax
 * ====================================================================
 */

// Hero 輪播
(function(){
  const slides = Array.from(document.querySelectorAll('.hero__bg .slide'));
  const dots = Array.from(document.querySelectorAll('#heroDots button'));
  let idx = 0, timer = null;
  function show(i){
    slides.forEach(s=>s.classList.remove('active'));
    dots.forEach(d=>d.classList.remove('active'));
    idx = (i+slides.length) % slides.length;
    slides[idx].classList.add('active');
    dots[idx].classList.add('active');
  }
  function play(){ timer = setInterval(()=> show(idx+1), 6000); }
  function stop(){ if(timer){ clearInterval(timer); timer=null; } }
  dots.forEach((d,i)=> d.addEventListener('click', ()=>{ stop(); show(i); play(); }));
  show(0); play();
})();

// 最新消息：無限自動循環 + 拖曳滑動 (Seamless Loop)
(function(){
  const row = document.getElementById('newsRow');
  const viewport = row ? row.parentElement : null;
  if(!row || !viewport) return;

  const GAP = 12;
  const getCardSize = () => window.innerWidth <= 760 ? 100 : 140;
  const getStep = () => getCardSize() + GAP;

  // 1. 複製兩組卡片以確保無縫循環
  const originalCards = Array.from(row.querySelectorAll('.news-card:not(.clone)'));
  originalCards.forEach(card => {
      const clone = card.cloneNode(true);
      clone.classList.add('clone');
      row.appendChild(clone);
  });
  // 再複製一組以防萬一
  originalCards.forEach(card => {
      const clone = card.cloneNode(true);
      clone.classList.add('clone');
      row.appendChild(clone);
  });

  let autoScrollTimer = null;
  let isHovered = false;
  let isDragging = false;
  let startX, scrollLeft;

  function autoScroll() {
    if (isHovered || isDragging) return;

    const step = getStep();
    const currentScroll = viewport.scrollLeft;
    const originalSetWidth = originalCards.length * step;

    // 如果目前捲動位置已經超過了第一組卡片，我們可以在視覺無縫的情況下跳回前面
    if (currentScroll >= originalSetWidth) {
        // 瞬間跳回 (scroll-behavior 必須設為 auto 或 instant)
        viewport.scrollTo({ left: currentScroll - originalSetWidth, behavior: 'auto' });
        
        // 跳回後，計算下一個目標位置
        // 注意：這裡需要給瀏覽器一點時間處理渲染，否則 smooth scroll 可能會被吃掉
        requestAnimationFrame(() => {
            requestAnimationFrame(() => {
               const newBase = currentScroll - originalSetWidth;
               viewport.scrollTo({ left: newBase + step, behavior: 'smooth' });
            });
        });
    } else {
        // 正常滑動
        viewport.scrollTo({ left: currentScroll + step, behavior: 'smooth' });
    }
  }

  function startAutoPlay() {
      if (autoScrollTimer) clearInterval(autoScrollTimer);
      autoScrollTimer = setInterval(autoScroll, 3000); // 3秒移動一次
  }

  function stopAutoPlay() {
      if (autoScrollTimer) clearInterval(autoScrollTimer);
  }

  // 事件監聽
  viewport.addEventListener('mouseenter', () => { isHovered = true; stopAutoPlay(); });
  viewport.addEventListener('mouseleave', () => { isHovered = false; isDragging = false; viewport.classList.remove('active'); startAutoPlay(); });
  
  viewport.addEventListener('touchstart', () => { isHovered = true; stopAutoPlay(); }, {passive: true});
  viewport.addEventListener('touchend', () => { 
      setTimeout(() => { isHovered = false; startAutoPlay(); }, 2000); 
  });

  // 拖曳功能
  viewport.addEventListener('mousedown', (e) => {
      isDragging = true;
      stopAutoPlay();
      viewport.classList.add('active');
      startX = e.pageX - viewport.offsetLeft;
      scrollLeft = viewport.scrollLeft;
  });

  viewport.addEventListener('mouseup', () => {
      isDragging = false;
      viewport.classList.remove('active');
      startAutoPlay();
  });

  viewport.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      e.preventDefault();
      const x = e.pageX - viewport.offsetLeft;
      const walk = (x - startX) * 1.5;
      viewport.scrollLeft = scrollLeft - walk;
  });

  // 啟動
  startAutoPlay();
})();

// Reveal Animation
(function(){
  const els = document.querySelectorAll('.reveal:not(#contact .reveal)'); // 排除 #contact 內的 .reveal
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        e.target.classList.add('in');
      }else{
        e.target.classList.remove('in');
      }
    });
  }, { threshold: 0.15 });
  els.forEach(el => io.observe(el));
  // 強制 #contact 內的 .reveal 保持可見
  function ensureContactVisible(){
    document.querySelectorAll('#contact .reveal').forEach(el => {
      el.classList.add('in');
    });
  }
  ensureContactVisible();
  window.addEventListener('resize', ensureContactVisible);
  window.addEventListener('load', ensureContactVisible);
})();

// 價格：單一展開
(function(){
  const list = document.getElementById('courseList');
  list?.addEventListener('toggle', (e)=>{
    const tgt = e.target;
    if(tgt.tagName.toLowerCase()!=='details' || !tgt.open) return;
    list.querySelectorAll('details[open]').forEach(d=>{ if(d!==tgt) d.open=false; });
  });
})();

// 季節切換 (Local Logic inside each pricecard)
(function(){
  const tabButtons = document.querySelectorAll('.tab-btn');
  
  if(!tabButtons.length) return;

  tabButtons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation(); // 防止觸發 details 展開/收合
      
      // 1. 找到當前的父容器 (pricetable)
      const container = btn.closest('.pricetable');
      if(!container) return;

      // 2. 移除該容器內所有 Tab 的 active 狀態
      container.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
      btn.classList.add('active');
      
      // 3. 取得目標季節 (standard, busy, spring)
      const target = btn.dataset.tab;
      
      // 4. 更新該容器內的價格表顯示
      const seasons = container.querySelectorAll('.season');
      seasons.forEach(s => {
        if(s.classList.contains(target)) {
          s.classList.add('active');
        } else {
          s.classList.remove('active');
        }
      });
    });
  });
})();


// 聯絡我們：mailto
(function(){
  const form = document.getElementById('contactForm');
  const msg  = document.getElementById('contactMsg');
  if(!form) return;
  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const name = form.name.value.trim();
    const email= form.email.value.trim();
    const phone= form.phone.value.trim();
    const notes= form.notes.value.trim();
    const subject = encodeURIComponent(`[聯絡我們] ${name || '未填寫姓名'}`);
    const body = encodeURIComponent(`姓名：${name}\nEmail：${email}\n電話：${phone}\n\n備註／需求：\n${notes}\n`);
    const mailto = `mailto:support@moposki.com?subject=${subject}&body=${body}`;
    window.location.href = mailto;
    msg.textContent = '已開啟郵件撰寫視窗，請確認後送出。';
  });
})();

// 捲動驅動（Hero/News）
(function(){
  const hero = document.getElementById('home');
  if(!hero) return;
  const DIST_FACTOR = 1.10, GRAY_START = 0.60, EASE_POWER = 3.00;
  const clamp01 = x => Math.min(1, Math.max(0, x));
  const ease    = t => Math.pow(clamp01(t), EASE_POWER);
  function onScroll(){
    const rect = hero.getBoundingClientRect();
    const vh   = window.innerHeight || 1;
    const raw = clamp01(-rect.top / (vh * DIST_FACTOR));
    const slide = ease(raw);
    const fade  = ease(raw);
    const grayRaw = clamp01((raw - GRAY_START) / (1 - GRAY_START));
    const gray    = ease(grayRaw);
    document.documentElement.style.setProperty('--slide', slide.toFixed(4));
    document.documentElement.style.setProperty('--fade',  fade.toFixed(4));
    document.documentElement.style.setProperty('--gray',  gray.toFixed(4));
  }
  onScroll();
  window.addEventListener('scroll', onScroll, {passive:true});
  window.addEventListener('resize', onScroll);
})();

// MOPO：逐行顯示與區塊縮放
(function(){
  const about = document.getElementById('about-mopo');
  const hero  = document.getElementById('home');
  if(!about || !hero) return;
  let compact = false;
  let activeShown = false;
  const hysteresis = 80;
  let enterY = 0;
  function compute() {
    const rect = about.getBoundingClientRect();
    const scrollY = window.scrollY || window.pageYOffset;
    const vh = window.innerHeight || 1;
    const aboutTop = scrollY + rect.top;
    enterY = aboutTop - vh * 0.85;
  }
  function apply() {
    const scrollY = window.scrollY || window.pageYOffset;
    const heroRect = hero.getBoundingClientRect();
    const heroMostlyVisible = heroRect.top > -20 && heroRect.bottom - 120 > 0 && heroRect.height > 0 && (heroRect.height - Math.abs(heroRect.top)) / heroRect.height >= 0.85;
    if (!activeShown && scrollY >= enterY) {
      about.classList.add('active');
      hero.classList.add('dim');
      activeShown = true;
    }
    if (activeShown && (scrollY < enterY - hysteresis || heroMostlyVisible)) {
      about.classList.remove('active');
      hero.classList.remove('dim');
      activeShown = false;
    }
    const aboutTopAbs = enterY + (window.innerHeight || 0) * 0.85;
    const shrinkOn  = aboutTopAbs + 140;
    const shrinkOff = aboutTopAbs + 60;
    if (!compact && scrollY > shrinkOn) {
      about.classList.add('compact');
      compact = true;
    } else if (compact && scrollY < shrinkOff) {
      about.classList.remove('compact');
      compact = false;
    }
  }
  compute();
  apply();
  let ticking = false;
  window.addEventListener('scroll', ()=> {
    if (!ticking) {
      requestAnimationFrame(()=>{ apply(); ticking = false; });
      ticking = true;
    }
  }, { passive:true });
  window.addEventListener('resize', ()=> { compute(); apply(); }, { passive:true });
})();
</script>
</body>
</html>